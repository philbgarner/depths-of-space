{"version":3,"file":"bfont-imui.js","mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,WACR,mBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,CAAC,UAAWJ,GACO,iBAAZC,QACdA,QAAc,KAAID,EAAQG,QAAQ,WAElCJ,EAAW,KAAIC,EAAQD,EAAa,OACrC,CATD,CASGO,MAAOC,G,kCCTVL,EAAOD,QAAUM,C,GCCbC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaV,QAGrB,IAAIC,EAASM,EAAyBE,GAAY,CAGjDT,QAAS,CAAC,GAOX,OAHAY,EAAoBH,GAAUR,EAAQA,EAAOD,QAASQ,GAG/CP,EAAOD,OACf,CCrBAQ,EAAoBK,EAAI,CAACb,EAASc,KACjC,IAAI,IAAIC,KAAOD,EACXN,EAAoBQ,EAAEF,EAAYC,KAASP,EAAoBQ,EAAEhB,EAASe,IAC5EE,OAAOC,eAAelB,EAASe,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDP,EAAoBQ,EAAI,CAACK,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFd,EAAoBkB,EAAK1B,IACH,oBAAX2B,QAA0BA,OAAOC,aAC1CX,OAAOC,eAAelB,EAAS2B,OAAOC,YAAa,CAAEC,MAAO,WAE7DZ,OAAOC,eAAelB,EAAS,aAAc,CAAE6B,OAAO,GAAO,E,6DC+R9D,QAlSA,MACIC,YAAYC,GACR,IAAKA,EAAOC,GACR,MAAM,IAAIC,MAAM,gCAEpBC,KAAKF,GAAKD,EAAOC,GAEjBE,KAAKC,UAAWJ,EAAOI,UAAWJ,EAAOI,SACrCJ,EAAOK,OACPF,KAAKC,UAAW,GAEpBD,KAAKE,KAAOL,EAAOK,KAAOL,EAAOK,KAAO,CAAEC,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,GAC/DN,KAAKO,MAAQV,EAAOU,MAAQV,EAAOU,MAAQ,YAC3CP,KAAKQ,QAAUX,EAAOW,QAAUX,EAAOW,aAAU/B,EACjDuB,KAAKS,KAAOZ,EAAOY,KAAOZ,EAAOY,KAAO,GACxCT,KAAKU,SAAWV,KAAKS,KACrBT,KAAKW,WAAad,EAAOc,WAAad,EAAOc,WAAa,KAE1DX,KAAKY,KAAOf,EAAOe,KAAOf,EAAOe,KAAO,GAExCZ,KAAKa,KAAOhB,EAAOgB,KAAOhB,EAAOgB,KAAOC,KAAKD,KAE7Cb,KAAKE,KAAKC,EAAIN,EAAOM,EAAIN,EAAOM,EAAIH,KAAKE,KAAKC,EAC9CH,KAAKE,KAAKE,EAAIP,EAAOO,EAAIP,EAAOO,EAAIJ,KAAKE,KAAKE,EAE9CJ,KAAKe,MAAQ,CACTC,SAAS,EACTC,WAAW,EACXC,WAAW,EACXC,SAAS,EACTC,QAAQ,GAEZpB,KAAKqB,UAAYxB,EAAOwB,UAAYxB,EAAOwB,UACvC,CACIL,SAAS,EACTC,WAAW,EACXC,WAAW,EACXC,SAAS,EACTC,QAAQ,GAGhBpB,KAAKsB,OAAS,KACVzB,EAAO0B,YACPvB,KAAKwB,kBAEb,CAEAA,iBAAiBC,GACb,IAAIC,EAAK,EAAGC,EAAK,EACbF,GACAC,EAAKD,EAAOtB,EACZwB,EAAKF,EAAOrB,EACZJ,KAAKyB,OAASA,GAEdzB,KAAKyB,OAAS,CAAEtB,EAAG,EAAGC,EAAG,GAE7B,IACIJ,KAAKsB,OAASM,SAASC,cAAc,UACrC7B,KAAKsB,OAAOQ,MAAQ9B,KAAKE,KAAKG,EAAIqB,EAClC1B,KAAKsB,OAAOS,OAAS/B,KAAKE,KAAKI,EAAIqB,EACnC3B,KAAKgC,UAAYhC,KAAKsB,OAAOW,WAAW,KAI5C,CAHE,MACEjC,KAAKsB,QAAS,IAAAY,cAAalC,KAAKE,KAAKG,EAAIqB,EAAI1B,KAAKE,KAAKI,EAAIqB,GAC3D3B,KAAKgC,UAAYhC,KAAKsB,OAAOW,WAAW,KAC5C,CACJ,CAEAE,iBACI,OAAOnC,KAAKqB,UAAUL,UAAYhB,KAAKe,MAAMC,SACzChB,KAAKqB,UAAUJ,YAAcjB,KAAKe,MAAME,WACxCjB,KAAKqB,UAAUH,YAAclB,KAAKe,MAAMG,WACxClB,KAAKqB,UAAUF,UAAYnB,KAAKe,MAAMI,SACtCnB,KAAKqB,UAAUD,SAAWpB,KAAKe,MAAMK,MAC7C,CAEAgB,qBACI,MAAO,CACHpB,QAAShB,KAAKe,MAAMC,QACpBC,UAAWjB,KAAKe,MAAME,UACtBC,UAAWlB,KAAKe,MAAMG,UACtBC,QAASnB,KAAKe,MAAMI,QACpBC,OAAQpB,KAAKe,MAAMK,OAE3B,CAEAiB,WAAWlC,EAAGC,EAAGF,GACb,IAAIV,EAAIU,GAAcF,KAAKE,KAC3B,OAAOC,GAAKX,EAAEW,GAAKA,EAAIX,EAAEW,EAAIX,EAAEa,GAAKD,GAAKZ,EAAEY,GAAKA,EAAIZ,EAAEY,EAAIZ,EAAEc,CAChE,CAEAgC,UAAY,OAAOtC,KAAKe,MAAMC,OAAQ,CACtCuB,QAAU,OAAOvC,KAAKe,MAAME,SAAU,CACtCuB,YAAc,OAAOxC,KAAKe,MAAMG,SAAU,CAC1CuB,UAAY,OAAOzC,KAAKe,MAAMI,OAAQ,CAEtCuB,SAAS7C,GACLG,KAAKqB,UAAYrB,KAAKoC,qBACtB,IAAK,IAAIO,KAAK9C,EACVG,KAAKe,MAAM4B,GAAK9C,EAAO8C,EAE/B,CAEAC,OAAO9B,EAAM+B,GACT,IAAIC,GAAM,EACNC,EAAQ/C,KAAKa,KAAOb,KAAKa,KAAOC,EAAKD,KA2CzC,OA1CIb,KAAKC,WACLD,KAAKE,KAAKG,EAAIL,KAAKS,KAAKuC,OAASD,EAAME,OACvCjD,KAAKE,KAAKI,EAAIyC,EAAMG,QAChBlD,KAAKS,MAAQT,KAAKS,KAAKuC,OAAS,IAChChD,KAAKE,KAAKI,EAAIyC,EAAMG,QAAUlD,KAAKS,KAAK0C,MAAM,MAAMH,SAGxDhD,KAAKe,MAAMC,SAAWhB,KAAKF,KAAOgB,EAAKsC,SACvCtC,EAAKsC,OAASpD,KAAKF,GACnBE,KAAK0C,SAAS,CAAEW,SAAS,IACzBP,GAAM,GAENhC,EAAKwC,SAASnD,GAAKH,KAAKE,KAAKC,GAAKW,EAAKwC,SAASlD,GAAKJ,KAAKE,KAAKE,GAAKU,EAAKwC,SAASnD,GAAKH,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,GAAKS,EAAKwC,SAASlD,GAAKJ,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,GAC3JN,KAAKe,MAAME,WAAajB,KAAKe,MAAMC,SACnChB,KAAK0C,SAAS,CAAEzB,WAAW,EAAMD,SAAS,IAC1C8B,GAAM,GACED,IACR7C,KAAK0C,SAAS,CAAEzB,WAAW,IAC3B6B,GAAM,GAENhC,EAAKyC,YAAc,IAAMvD,KAAKe,MAAMG,WACpClB,KAAK0C,SAAS,CAAExB,WAAW,EAAMqC,YAAazC,EAAKyC,cACnDT,GAAM,GACsB,IAArBhC,EAAKyC,aAAqBvD,KAAKqB,UAAUH,YAChDlB,KAAK0C,SAAS,CAAEvB,SAAS,EAAMD,WAAW,IAC1C4B,GAAM,IAGV9C,KAAK0C,SAAS,CAAEzB,WAAW,EAAOC,WAAW,EAAOC,SAAS,EAAOH,SAAS,IAExD,IAArBF,EAAKyC,aAAqBvD,KAAKe,MAAMI,UACrCnB,KAAK0C,SAAS,CAAEvB,SAAS,EAAOH,SAAS,IACzCF,EAAKsC,OAASpD,KAAKF,GACnBgD,GAAM,GAEN9C,KAAKS,OAAST,KAAKU,UACnBV,KAAK0C,SAAS,CAAEtB,QAAQ,IACxBpB,KAAKU,SAAWV,KAAKS,MAErBT,KAAK0C,SAAS,CAAEtB,QAAQ,IAGrB0B,CACX,CAEAU,gBAAgB3C,EAAM4C,GAClB,IAAIC,EAAQ,GACZ,IACuB,iBAARD,IACPA,EAAM5C,EAAK8C,SAASC,QAAOC,GAAKA,EAAEC,aAAeL,IAAK,GAAGM,QAE7DL,EAAQD,EAAIN,MAAM,KAGtB,CAFE,MAAOa,GACLC,QAAQC,IAAI,mCAAoCF,EAAG,uBAAwBP,EAC/E,CACA,IAAIpD,EAAI,EACR,IAAK,IAAI8D,KAAKT,EAAO,CACjB,IAAIU,EAAOV,EAAMS,GACbE,EAAU,EACd,IAAK,IAAIC,KAAKF,EAAM,CAChB,IAAIG,EAAO1D,EAAK8C,SAASC,QAAOC,GAAKA,EAAEE,SAAWK,EAAKE,KACnDC,EAAKvB,OAAS,GACVuB,EAAK,GAAGrE,OACRmE,GAAWE,EAAK,GAAGrE,KAAKG,EAGpC,CACIgE,EAAUhE,IACVA,EAAIgE,EAEZ,CACA,OAAOhE,CACX,CAEAmE,eAAe3D,EAAM4C,EAAKvD,GACtB,IAAIwD,EAAQD,EAAIN,MAAM,MAClBsB,EAAUC,SAASxE,EAAKG,EAAIQ,EAAKoC,QACjCqB,EAAI,EACR,KAAOtE,KAAKwD,gBAAgB3C,EAAM6C,EAAMiB,KAAK,QAAUzE,EAAKG,GAAKiE,GAAK,KAAK,CACvE,IAAIM,EAAW,GACf,IAAK,IAAIT,KAAKT,EACMA,EAAMS,GAAGnB,OAASnC,EAAKoC,OACvB/C,EAAKG,EACjBuE,EAASC,KAAKnB,EAAMS,GAAGW,MAAM,EAAGL,GAASM,OACzBrB,EAAMS,GAAGW,MAAML,EAASf,EAAMS,GAAGnB,QAAQ+B,QAEzDH,EAASC,KAAKnB,EAAMS,IAG5BT,EAAQkB,EACRN,GACJ,CACA,OAAOZ,EAAMiB,KAAK,KACtB,CAEAK,mBAAmBnE,EAAM4C,EAAKvD,GAC1B,IAAIwD,EAAQD,EAAIN,MAAM,MAClBsB,EAAUC,SAASxE,EAAKG,EAAIQ,EAAKoC,QACjCqB,EAAI,EACR,KAAOtE,KAAKwD,gBAAgB3C,EAAM6C,EAAMiB,KAAK,QAAUzE,EAAKG,GAAKiE,GAAK,KAAK,CACvE,IAAIM,EAAW,GACf,IAAK,IAAIT,KAAKT,EAEV,GADgBA,EAAMS,GAAGnB,OAASnC,EAAKoC,OACvB/C,EAAKG,EAAG,CAGpB,IACI4E,EADOvB,EAAMS,GAAGe,UAAU,EAAGT,GAAStB,MAAM,IAAIgC,UAAUR,KAAK,IAClDS,OAAO,MACxBR,EAASC,KAAKnB,EAAMS,GAAGW,MAAM,EAAGL,EAAUQ,GAAOF,OAC7BrB,EAAMS,GAAGW,MAAML,EAAUQ,EAAOvB,EAAMS,GAAGnB,QAAQ+B,OACzE,MACIH,EAASC,KAAKnB,EAAMS,IAG5BT,EAAQkB,EACRN,GACJ,CACA,OAAOZ,EAAMiB,KAAK,KACtB,CAEAU,WAAWxE,GACP,IAAI4C,EAAMzD,KAAKS,KAAOT,KAAKS,KAAO,GAGlC,GADAI,EAAOA,GAAcyE,QAAQC,QAAQC,QACjCxF,KAAKwD,gBAAgB3C,EAAM4C,GAAOzD,KAAKE,KAAKG,EAC5C,GAAkB,SAAdL,KAAKY,KAAiB,CACtB,IAAI6E,EAAgBC,KAAKC,MAAM3F,KAAKE,KAAKG,EAAIQ,EAAKoC,QAClDQ,EAAMA,EAAIyB,UAAU,EAAGO,EAC3B,MAAO,GAAkB,aAAdzF,KAAKY,KAAqB,CACjC,IAAI6E,EAAgBC,KAAKC,MAAM3F,KAAKE,KAAKG,EAAIQ,EAAKoC,QAClDQ,EAAMA,EAAIyB,UAAU,EAAGO,EAAgB,GACvChC,GAAO,KACX,KAAyB,SAAdzD,KAAKY,KACZ6C,EAAMzD,KAAKwE,eAAe3D,EAAM4C,EAAKzD,KAAKE,MACrB,cAAdF,KAAKY,OACZ6C,EAAMzD,KAAKgF,mBAAmBnE,EAAM4C,EAAKzD,KAAKE,OAGtDuD,EAAqB,iBAARA,EAAmBA,EAAM,GACtC,IAAImC,EAAM5F,KAAKwD,gBAAgB3C,EAAM4C,GACjCoC,EAAMpC,EAAIN,MAAM,MAAMH,OAASnC,EAAKqC,QACpC4C,EAAM,CAAErF,KAAMgD,EAAKpD,EAAGuF,EAAM5F,KAAKE,KAAKG,EAAIuF,EAAM5F,KAAKE,KAAKG,EAAGC,EAAGuF,EAAM7F,KAAKE,KAAKI,EAAIuF,EAAM7F,KAAKE,KAAKI,GAIxG,OAHIN,KAAKC,WACLD,KAAKE,KAAO4F,GAETA,CACX,CAEAC,SAASjF,EAAMD,EAAMX,GACjB,IAAI8F,EAAYhG,KAAKO,MACjBP,KAAKF,KAAOgB,EAAKsC,SACjB4C,EAAYhG,KAAKiG,UAAYjG,KAAKiG,UAAYD,GAElD,IAAIpF,EAAOZ,KAAKqF,WAAWxE,GAC3BC,EAAKoF,aAAarF,EAAMX,EAAKC,EAAGD,EAAKE,EAAGQ,EAAKH,KAAMuF,GACnD9F,EAAKI,EAAIM,EAAKN,EACdJ,EAAKG,EAAIO,EAAKP,EACdL,KAAKE,KAAOA,CAChB,CAEAiG,MAAMrF,EAAMZ,GACJF,KAAKQ,SACLM,EAAKsF,SAASlG,EAAMF,KAAKQ,SAE7B,IAAIuC,EAAQ/C,KAAKa,KAAOb,KAAKa,KAAOC,EAAKD,KACzCb,KAAK+F,SAASjF,EAAMiC,EAAO7C,EAC/B,CAEAmG,KAAKvF,GACD,IAAIZ,EAAOF,KAAKE,KACZoG,EAAMxF,EAAKwF,IACfA,EAAIC,OACAvG,KAAKW,aACLT,EAAKC,GAAKH,KAAKW,WAAWR,EAC1BD,EAAKE,GAAKJ,KAAKW,WAAWP,EAC1BkG,EAAIE,YACJF,EAAIpG,KAAKF,KAAKW,WAAWR,EAAGH,KAAKW,WAAWP,EAAGJ,KAAKW,WAAWN,EAAGL,KAAKW,WAAWL,GAClFgG,EAAIG,YACJH,EAAII,QAER1G,KAAKmG,MAAMrF,EAAMZ,GACjBoG,EAAIK,SACR,GCvQJ,EAxBA,cAAwB,EACpB/G,YAAYC,GACR+G,MAAM/G,GACNG,KAAKE,KAAKI,EAAiC,GAA7BoE,SAAS1E,KAAKE,KAAKI,EAAI,IACrCN,KAAKE,KAAKG,EAAgC,EAA5BqE,SAAS1E,KAAKE,KAAKG,EAAI,GAEjCR,EAAO0B,YACPvB,KAAKwB,iBAAiB,CAACrB,EAAG,EAAGC,EAAG,IAExC,CAEA+F,MAAMrF,EAAMZ,GACJF,KAAKQ,SACLM,EAAKsF,SAASlG,EAAMF,KAAKQ,SAE7B,IAAIiD,EAAMzD,KAAKS,KAAKuC,QAAU9C,EAAKG,EAAI,GAAKS,EAAKD,KAAKoC,OAASjD,KAAKS,KAAKoG,OAAO,EAAGnC,UAAUxE,EAAKG,EAAI,GAAKS,EAAKD,KAAKoC,SAAWjD,KAAKS,KAEjIqG,EAAa,CAAE3G,EAAGD,EAAKC,EAAIW,EAAKD,KAAKoC,OAAS,EAAG7C,EAAGF,EAAKE,EAAIU,EAAKD,KAAKqC,QAAU,EAAG7C,EAAGH,EAAKG,EAAIS,EAAKD,KAAKoC,OAAQ3C,EAAGJ,EAAKI,EAAIQ,EAAKD,KAAKqC,SAC5IpC,EAAKiG,WAAWD,EAAY9G,KAAKO,OAEjCO,EAAKiF,SAAS7F,EAAKC,EAAIW,EAAKD,KAAKoC,OAAQ/C,EAAKE,EAAIU,EAAKD,KAAKqC,QAASO,EAAKzD,KAAKO,MACnF,GCUJ,EA/BA,cAAsB,EAClBX,YAAYC,GACR+G,MAAM/G,GACNG,KAAKE,KAAKI,EAAiC,GAA7BoE,SAAS1E,KAAKE,KAAKI,EAAI,IACrCN,KAAKE,KAAKG,EAAgC,EAA5BqE,SAAS1E,KAAKE,KAAKG,EAAI,GAEjCR,EAAO0B,YACPvB,KAAKwB,iBAAiB,CAACrB,EAAG,EAAGC,EAAG,IAExC,CAEA+F,MAAMrF,EAAMZ,GACJF,KAAKQ,SACLM,EAAKsF,SAASlG,EAAMF,KAAKQ,SAE7B,IAAIiD,EAAMzD,KAAKS,KAAKuC,QAAU9C,EAAKG,EAAI,GAAKS,EAAKD,KAAKoC,OAASjD,KAAKS,KAAKoG,OAAO,EAAGnC,UAAUxE,EAAKG,EAAI,GAAKS,EAAKD,KAAKoC,SAAWjD,KAAKS,KAEjIqG,EAAa,CAAE3G,EAAGD,EAAKC,EAAIW,EAAKD,KAAKoC,OAAS,EAAG7C,EAAGF,EAAKE,EAAIU,EAAKD,KAAKqC,QAAU,EAAG7C,EAAGH,EAAKG,EAAIS,EAAKD,KAAKoC,OAAQ3C,EAAGJ,EAAKI,EAAIQ,EAAKD,KAAKqC,SAExI+C,EAAajG,KAAKgH,SAA4BhH,KAAKiH,OAAtBjH,KAAKiG,UAClCgB,EAAUjH,KAAKgH,SAAyBhH,KAAKiG,UAAnBjG,KAAKiH,OAEnCnG,EAAKoG,WAAWJ,EAAW3G,EAAG2G,EAAW1G,EAAG0G,EAAW3G,EAAI2G,EAAWzG,EAAGyG,EAAW1G,EAAG6F,GACvFnF,EAAKoG,WAAWJ,EAAW3G,EAAI2G,EAAWzG,EAAGyG,EAAW1G,EAAG0G,EAAW3G,EAAI2G,EAAWzG,EAAGyG,EAAW1G,EAAI0G,EAAWxG,EAAG2F,GACrHnF,EAAKoG,WAAWJ,EAAW3G,EAAG2G,EAAW1G,EAAI0G,EAAWxG,EAAGwG,EAAW3G,EAAI2G,EAAWzG,EAAGyG,EAAW1G,EAAI0G,EAAWxG,EAAG2G,GACrHnG,EAAKoG,WAAWJ,EAAW3G,EAAG2G,EAAW1G,EAAG0G,EAAW3G,EAAG2G,EAAW1G,EAAI0G,EAAWxG,EAAG2G,GAEvFnG,EAAKiF,SAAS7F,EAAKC,EAAIW,EAAKD,KAAKoC,OAAQ/C,EAAKE,EAAIU,EAAKD,KAAKqC,QAASO,EAAKzD,KAAKO,MACnF,GCaJ,EAzCA,cAAuB,EACnBX,YAAYC,GACR+G,MAAM/G,GACNG,KAAKE,KAAKI,EAAiC,GAA7BoE,SAAS1E,KAAKE,KAAKI,EAAI,IACrCN,KAAKE,KAAKG,EAAgC,EAA5BqE,SAAS1E,KAAKE,KAAKG,EAAI,GAEjCR,EAAO0B,YACPvB,KAAKwB,iBAAiB,CAACrB,EAAG,EAAGC,EAAG,IAExC,CAEA+F,MAAMrF,EAAMZ,GACJF,KAAKQ,SACLM,EAAKsF,SAASlG,EAAMF,KAAKQ,SAE7B,IAAIiD,EAAMzD,KAAKS,KAAKuC,QAAU9C,EAAKG,EAAI,GAAKS,EAAKD,KAAKoC,OAASjD,KAAKS,KAAKoG,OAAO,EAAGnC,UAAUxE,EAAKG,EAAI,GAAKS,EAAKD,KAAKoC,SAAWjD,KAAKS,KAEjIqG,EAAa,CAAE3G,EAAGD,EAAKC,EAAIW,EAAKD,KAAKoC,OAAS,EAAG7C,EAAGF,EAAKE,EAAIU,EAAKD,KAAKqC,QAAU,EAAG7C,EAAGH,EAAKG,EAAIS,EAAKD,KAAKoC,OAAQ3C,EAAGJ,EAAKI,EAAIQ,EAAKD,KAAKqC,SAExI8D,IAAWhH,KAAKgH,UAAWhH,KAAKgH,SAChChH,KAAKe,MAAMG,YACX8F,GAAW,GAGf,IAAIf,EAAae,EAA4BhH,KAAKiH,OAAtBjH,KAAKiG,UAC7BgB,EAAUD,EAAyBhH,KAAKiG,UAAnBjG,KAAKiH,OAE9BnG,EAAKoG,WAAWJ,EAAW3G,EAAG2G,EAAW1G,EAAG0G,EAAW3G,EAAI2G,EAAWzG,EAAGyG,EAAW1G,EAAG6F,GACvFnF,EAAKoG,WAAWJ,EAAW3G,EAAI2G,EAAWzG,EAAGyG,EAAW1G,EAAG0G,EAAW3G,EAAI2G,EAAWzG,EAAGyG,EAAW1G,EAAI0G,EAAWxG,EAAG2F,GACrHnF,EAAKoG,WAAWJ,EAAW3G,EAAG2G,EAAW1G,EAAI0G,EAAWxG,EAAGwG,EAAW3G,EAAI2G,EAAWzG,EAAGyG,EAAW1G,EAAI0G,EAAWxG,EAAG2G,GACrHnG,EAAKoG,WAAWJ,EAAW3G,EAAG2G,EAAW1G,EAAG0G,EAAW3G,EAAG2G,EAAW1G,EAAI0G,EAAWxG,EAAG2G,GAEvF,IAAIvF,EAAK,EAAGC,EAAK,EACb3B,KAAKe,MAAMG,YACXQ,EAAKgD,SAA4B,GAAnB5D,EAAKD,KAAKoC,QACxBtB,EAAK+C,SAA6B,GAApB5D,EAAKD,KAAKqC,UAE5BpC,EAAKiF,SAASe,EAAW3G,EAAIuB,EAAKoF,EAAWzG,EAAI,EAAKoD,EAAIT,OAASlC,EAAKD,KAAKoC,OAAU,EAAG6D,EAAW1G,EAAIuB,EAAKmF,EAAWxG,EAAI,EAAIQ,EAAKD,KAAKqC,QAAU,EAAGO,EAAKzD,KAAKO,MACtK,GCKJ,EA3CA,cAAyB,EACrBX,YAAYC,GACR+G,MAAM/G,GACNG,KAAKE,KAAKI,EAAiC,GAA7BoE,SAAS1E,KAAKE,KAAKI,EAAI,IACrCN,KAAKE,KAAKG,EAAgC,EAA5BqE,SAAS1E,KAAKE,KAAKG,EAAI,GAErCL,KAAKmH,SAAWtH,EAAOsH,SAAWtH,EAAOsH,SAAW,IACpDnH,KAAKoH,UAAYvH,EAAOuH,UAAYvH,EAAOuH,UAAY,IAEnDvH,EAAO0B,YACPvB,KAAKwB,iBAAiB,CAACrB,EAAG,EAAGC,EAAG,IAExC,CAEA+F,MAAMrF,EAAMZ,GACR,IAAIuD,EAAMzD,KAAKS,KAAKuC,QAAU9C,EAAKG,EAAI,GAAKS,EAAKD,KAAKoC,OAASjD,KAAKS,KAAKoG,OAAO,EAAGnC,UAAUxE,EAAKG,EAAI,GAAKS,EAAKD,KAAKoC,SAAWjD,KAAKS,KAEjIuF,EAAYhG,KAAKO,MACjBC,EAAUR,KAAKQ,QAEfR,KAAKe,MAAME,YAAcjB,KAAKe,MAAMG,WAAalB,KAAKiG,YACtDD,EAAYhG,KAAKiG,WAGjBzF,IACIR,KAAKe,MAAMG,YACX8E,EAAYhG,KAAKQ,QACjBA,EAAUR,KAAKO,OAGnBO,EAAKsF,SAASlG,EAAMM,IAEpBR,KAAKF,KAAOgB,EAAKsC,SACjB4C,EAAYhG,KAAKiG,UAAYjG,KAAKiG,UAAYD,GAGlDlF,EAAKiF,SAAS7F,EAAKC,EAAID,EAAKG,EAAI,EAAKoD,EAAIT,OAASlC,EAAKD,KAAKoC,OAAU,EAAG/C,EAAKE,EAAIF,EAAKI,EAAI,EAAIQ,EAAKD,KAAKqC,QAAU,EAAGO,EAAKuC,GAE3HlF,EAAKiF,SAAS7F,EAAKC,EAAGD,EAAKE,EAAIF,EAAKI,EAAI,EAAIQ,EAAKD,KAAKqC,QAAU,EAAGlD,KAAKmH,SAAUnB,GAClFlF,EAAKiF,SAAS7F,EAAKC,EAAID,EAAKG,EAAIS,EAAKD,KAAKoC,OAAQ/C,EAAKE,EAAIF,EAAKI,EAAI,EAAIQ,EAAKD,KAAKqC,QAAU,EAAGlD,KAAKoH,UAAWpB,EACnH,GCeJ,EAvDA,cAA0B,EACtBpG,YAAYC,GACR+G,MAAM/G,GACNG,KAAKS,KAAOZ,EAAOwH,YAAcxH,EAAOwH,YAAc,GACtDrH,KAAKa,KAAOhB,EAAOgB,KAAOhB,EAAOgB,KAAO,KAEpCb,KAAKa,MACLb,KAAKE,KAAKI,EAAIoE,SAAU1E,KAAKE,KAAKI,EAAIN,KAAKa,KAAKqC,QAAWlD,KAAKa,KAAKqC,SACrElD,KAAKE,KAAKG,EAAIL,KAAKwD,gBAAgBxD,KAAKa,KAAMb,KAAKS,QAEnDT,KAAKE,KAAKG,EAAI,EACdL,KAAKE,KAAKI,EAAI,GAGlBN,KAAKsH,UAAWzH,EAAOyH,UAAWzH,EAAOyH,SAErCzH,EAAO0B,YACPvB,KAAKwB,iBAAiB,CAACrB,EAAG,EAAGC,EAAG,IAExC,CAEAmH,OAAS,OAAOvH,KAAKS,IAAK,CAE1B0F,MAAMrF,EAAMZ,GACHF,KAAKa,OACNb,KAAKa,KAAOC,EAAKD,MAErB,IAAI4C,EAAMzD,KAAKS,KAEXuF,EAAYhG,KAAKO,MACjBC,EAAUR,KAAKQ,QAEfR,KAAKe,MAAME,YAAcjB,KAAKe,MAAMG,WAAalB,KAAKiG,YACtDD,EAAYhG,KAAKiG,WAGjBzF,IACIR,KAAKe,MAAMG,YACX8E,EAAYhG,KAAKQ,QACjBA,EAAUR,KAAKO,OAGnBO,EAAKsF,SAASlG,EAAMM,IAGpBR,KAAKF,KAAOgB,EAAKsC,SACjB4C,EAAYhG,KAAKiG,UAAYjG,KAAKiG,UAAYD,EAC1CwB,KAAKC,MAAQ,IAAO,KACpB3G,EAAKoF,aAAalG,KAAKa,KAAMX,EAAKC,EAAIH,KAAKwD,gBAAgBxD,KAAKa,KAAM,GAAG4C,KAAQvD,EAAKE,EAAIF,EAAKI,EAAI,EAAIN,KAAKa,KAAKqC,QAAU,EAAG,IAAK8C,IAG3IlF,EAAKoF,aAAalG,KAAKa,KAAMX,EAAKC,EAAGD,EAAKE,EAAIF,EAAKI,EAAI,EAAIN,KAAKa,KAAKqC,QAAU,EAAGO,EAAKuC,EAC3F,GCgEJ,EApHA,cAAmB,EACfpG,YAAYC,GACR+G,MAAM/G,GACNG,KAAKE,KAAKI,EAAiC,GAA7BoE,SAAS1E,KAAKE,KAAKI,EAAI,IACrCN,KAAKE,KAAKG,EAAgC,EAA5BqE,SAAS1E,KAAKE,KAAKG,EAAI,GAErCL,KAAK0H,YAAc7H,EAAO6H,YAAc7H,EAAO6H,YAAc,YAC7D1H,KAAK2H,KAAO9H,EAAO8H,KAAO9H,EAAO8H,KAAO,GACxC3H,KAAK4H,YAAc,KACnB5H,KAAK6H,aAAehI,EAAOgI,aAAehI,EAAOgI,aAAe,EAChE7H,KAAK8H,SAAUjI,EAAOiI,SAAUjI,EAAOiI,QACvC9H,KAAK+H,aAAalI,EAAOkI,YAAalI,EAAOkI,WAC7C/H,KAAKgI,WAAYnI,EAAOmI,WAAYnI,EAAOmI,UAE3ChI,KAAKiI,oBAAsB,CACvBC,SAAUrI,EAAOqI,SAAWrI,EAAOqI,SAAW,IAC9CC,WAAYtI,EAAOsI,WAAatI,EAAOsI,WAAa,IACpDC,YAAavI,EAAOuI,YAAcvI,EAAOuI,YAAc,KAG3DpI,KAAKqI,eAAgB,CACzB,CAEAlC,MAAMrF,EAAMZ,GACR,IAAI8F,EAAYhG,KAAKO,MACjBC,EAAUR,KAAKQ,QAEfR,KAAKe,MAAME,YAAcjB,KAAKe,MAAMG,WAAalB,KAAKiG,YACtDD,EAAYhG,KAAKiG,WAGjBzF,GACAM,EAAKsF,SAASlG,EAAMM,GAGxB,IAAI8H,EAAKpI,EAAKC,EAAIW,EAAKD,KAAKoC,OACxBsF,EAAKrI,EAAKE,EACd,IAAK,IAAI+D,EAAInE,KAAK6H,aAAc1D,EAAInE,KAAK2H,KAAK3E,OAAQmB,IAAK,CACvD,IAAIV,EAAMzD,KAAK2H,KAAKxD,GAEhBqE,EAAU,CAAErI,EAAGmI,EAAIlI,EAAGmI,EAAIlI,EAAGoD,EAAIT,OAASlC,EAAKD,KAAKoC,OAAQ3C,EAAGQ,EAAKD,KAAKqC,SACzEuF,EAAczI,KAAKe,MAAME,WACzBH,EAAKwC,SAASlD,GAAKoI,EAAQpI,GAAKU,EAAKwC,SAASnD,GAAKqI,EAAQrI,GAC3DW,EAAKwC,SAASnD,EAAIqI,EAAQrI,EAAIqI,EAAQnI,GAAKS,EAAKwC,SAASlD,EAAIoI,EAAQpI,EAAIoI,EAAQlI,EACjFoI,EAAkB1I,KAAKe,MAAMG,WAAaJ,EAAKwC,SAASlD,GAAKoI,EAAQpI,GAAKU,EAAKwC,SAASnD,GAAKqI,EAAQrI,GACjGW,EAAKwC,SAASnD,EAAIqI,EAAQrI,EAAIqI,EAAQnI,GAAKS,EAAKwC,SAASlD,EAAIoI,EAAQpI,EAAIoI,EAAQlI,EAWzF,GAVIoI,IACA1I,KAAK4H,YAAczD,GAGvBrD,EAAKiF,SAASuC,EAAIC,EAAI9E,EAAKgF,EAAczC,EAAYhG,KAAKO,MAAOkI,GAAezI,KAAK4H,cAAgBzD,EAAI,CAAEwE,WAAY,CAAEC,OAAQF,EAAkB,YAAc1I,KAAK0H,mBAAiBjJ,GAClLuB,KAAK+H,WAGNO,GAAMxH,EAAKD,KAAKoC,QAAUQ,EAAIT,OAAS,GAFvCuF,GAAMzH,EAAKD,KAAKqC,QAIhBoF,EAAKpI,EAAKC,EAAID,EAAKG,EACnB,MAEJ,GAAIkI,EAAKzH,EAAKD,KAAKqC,QAAUhD,EAAKE,EAAIF,EAAKI,EACvC,KAER,CAEA,GAAIN,KAAKE,KAAKI,EAAIQ,EAAKD,KAAKqC,QAAUlD,KAAK2H,KAAK3E,SAAWhD,KAAK+H,WAAY,CACxE,IAAIc,EAAS,CAAE1I,EAAGD,EAAKC,EAAID,EAAKG,EAAIS,EAAKD,KAAKoC,OAAQ7C,EAAGF,EAAKE,EAAGC,EAAGS,EAAKD,KAAKoC,OAAQ3C,EAAGQ,EAAKD,KAAKqC,SAC/F4F,EAAW,CAAE3I,EAAGD,EAAKC,EAAID,EAAKG,EAAIS,EAAKD,KAAKoC,OAAQ7C,EAAGF,EAAKE,EAAIF,EAAKI,EAAIQ,EAAKD,KAAKqC,QAAS7C,EAAGS,EAAKD,KAAKoC,OAAQ3C,EAAGQ,EAAKD,KAAKqC,SAC9H6F,EAAgB,CAAE5I,EAAGD,EAAKC,EAAID,EAAKG,EAAIS,EAAKD,KAAKoC,OAAQ7C,EAAGF,EAAKE,EAAIU,EAAKD,KAAKqC,QAAS7C,EAAGS,EAAKD,KAAKoC,OAAQ3C,EAAGJ,EAAKI,EAAyB,EAApBQ,EAAKD,KAAKqC,SACxIpC,EAAKsF,SAAS2C,EAAe/I,KAAK0H,aAClC5G,EAAKiF,SAAS8C,EAAO1I,EAAG0I,EAAOzI,EAAGJ,KAAKiI,oBAAoBC,SAAUlI,KAAKqC,WAAWvB,EAAKwC,SAASnD,EAAGW,EAAKwC,SAASlD,EAAGyI,IAAW7I,KAAKe,MAAMG,UAAYlB,KAAKiG,UAAYjG,KAAKO,MAC3KP,KAAKqC,WAAWvB,EAAKwC,SAASnD,EAAGW,EAAKwC,SAASlD,EAAGyI,IAAW7I,KAAKe,MAAMG,UAAY,CAAEyH,WAAY,CAAEC,OAAQ5I,KAAKO,QAAY,CAAEoI,WAAY,CAAEC,OAAQ5I,KAAK0H,eAC9J5G,EAAKiF,SAAS+C,EAAS3I,EAAG2I,EAAS1I,EAAGJ,KAAKiI,oBAAoBE,WAAYnI,KAAKqC,WAAWvB,EAAKwC,SAASnD,EAAGW,EAAKwC,SAASlD,EAAG0I,IAAa9I,KAAKe,MAAMG,UAAYlB,KAAKiG,UAAYjG,KAAKO,MACnLP,KAAKqC,WAAWvB,EAAKwC,SAASnD,EAAGW,EAAKwC,SAASlD,EAAG0I,IAAa9I,KAAKe,MAAMG,UAAY,CAAEyH,WAAY,CAAEC,OAAQ5I,KAAKO,QAAY,CAAEoI,WAAY,CAAEC,OAAQ5I,KAAK0H,eAEhK,IAAIsB,EAAYhJ,KAAK6H,cAAgB7H,KAAK2H,KAAK3E,OAAS,GAAM+F,EAAczI,EACxE2I,EAAYjJ,KAAKO,MACjB2I,EAAUlJ,KAAK0H,YAEd1H,KAAKqI,cAoBCrI,KAAKqI,eAAiBrI,KAAKe,MAAMG,WACxClB,KAAK6H,aAAenD,UAAW5D,EAAKwC,SAASlD,EAAI2I,EAAc3I,GAAK2I,EAAczI,GAAMN,KAAK2H,KAAK3E,OAAS,IACvGhD,KAAK6H,aAAe,EACpB7H,KAAK6H,aAAe,EACb7H,KAAK6H,aAAe7H,KAAK2H,KAAK3E,OAAS,IAC9ChD,KAAK6H,aAAe7H,KAAK2H,KAAK3E,OAAS,GAE3CkG,EAAUlJ,KAAKO,MACf0I,EAAYjJ,KAAK0H,aACV1H,KAAKqI,gBACZrI,KAAKqI,eAAgB,GA7BjBrI,KAAKqC,WAAWvB,EAAKwC,SAASnD,EAAGW,EAAKwC,SAASlD,EAAGyI,IAAW7I,KAAKsC,UACxC,OAAtBtC,KAAK6H,eACL7H,KAAK6H,aAAe7H,KAAK6H,aAAe,EAAI,EAAI,EAAG7H,KAAK6H,aAAe,GAEpE7H,KAAKqC,WAAWvB,EAAKwC,SAASnD,EAAGW,EAAKwC,SAASlD,EAAG0I,IAAa9I,KAAKsC,UACjD,OAAtBtC,KAAK6H,eACL7H,KAAK6H,aAAe7H,KAAK6H,aAAe,EAAI7H,KAAK2H,KAAK3E,OAAS,EAAIhD,KAAK2H,KAAK3E,OAAS,EAAGhD,KAAK6H,aAAe,GAE1G7H,KAAKqC,WAAWvB,EAAKwC,SAASnD,EAAGW,EAAKwC,SAASlD,EAAG,CAAED,EAAG4I,EAAc5I,EAAGC,EAAG2I,EAAc3I,EAAI4I,EAAU3I,EAAG0I,EAAc1I,EAAGC,EAAGQ,EAAKD,KAAKoC,UAAYjD,KAAKe,MAAMG,UACtKlB,KAAKqI,eAAgB,EACdrI,KAAKqC,WAAWvB,EAAKwC,SAASnD,EAAGW,EAAKwC,SAASlD,EAAG2I,IAAkB/I,KAAKsC,WACtD,OAAtBtC,KAAK6H,eACD/G,EAAKwC,SAASlD,EAAI2I,EAAc3I,EAAI4I,EACpChJ,KAAK6H,aAAe7H,KAAK6H,aAAe,GAAK,EAAI7H,KAAK6H,aAAe,GAAK,EACnE/G,EAAKwC,SAASlD,EAAI2I,EAAc3I,EAAI4I,EAAWlI,EAAKD,KAAKqC,UAChElD,KAAK6H,aAAe7H,KAAK6H,aAAe,GAAK7H,KAAK2H,KAAK3E,OAAS,EAAIhD,KAAK6H,aAAe,GAAK7H,KAAK2H,KAAK3E,OAAS,IAgBhI,IAAImG,EAAenJ,KAAKqC,WAAWvB,EAAKwC,SAASnD,EAAGW,EAAKwC,SAASlD,EAAG,CAAED,EAAG4I,EAAc5I,EAAGC,EAAG2I,EAAc3I,EAAI4I,EAAU3I,EAAG0I,EAAc1I,EAAGC,EAAGQ,EAAKD,KAAKoC,SAC3JnC,EAAKiF,SAASgD,EAAc5I,EAAG4I,EAAc3I,EAAI4I,EAAUhJ,KAAKiI,oBAAoBG,YAAae,EAAenJ,KAAKiG,UAAYgD,EAAW,CAAEN,WAAY,CAAEC,OAAQM,IACxK,CACJ,GC7FJ,EApBA,cAAoB,EAChBtJ,YAAYC,GACR+G,MAAM/G,GAING,KAAKoJ,MAAQvJ,EAAOuJ,MAAQvJ,EAAOuJ,MAAQ,IAC/C,CAEAjD,MAAMrF,EAAMZ,GACJF,KAAKoJ,QACsB,QAAvBpJ,KAAKoJ,MAAMC,QACXvI,EAAKwF,IAAIgD,UAAUtJ,KAAKoJ,MAAOpJ,KAAKE,KAAKC,EAAGH,KAAKE,KAAKE,EAAGJ,KAAKE,KAAKG,EAAGL,KAAKE,KAAKI,GACzEN,KAAKoJ,MAAMG,MAClBvJ,KAAKoJ,MAAMG,OAGvB,GCoFJ,EArGA,cAAyB,EACrB3J,YAAYC,GACR+G,MAAM/G,GAENG,KAAKoJ,MAAQvJ,EAAOuJ,MAAQvJ,EAAOuJ,MAAQ,KACvCvJ,EAAO2J,UACPxJ,KAAKwJ,UAAY3J,EAAO2J,UACjB3J,EAAO4J,YACdzJ,KAAKwJ,UAAY,CACbrJ,EAAGN,EAAO4J,YACVrJ,EAAGP,EAAO4J,YACVpJ,EAAGL,KAAKE,KAAKG,EAAyB,EAArBR,EAAO4J,YACxBnJ,EAAGN,KAAKE,KAAKI,EAAyB,EAArBT,EAAO4J,aAG5BzJ,KAAKwJ,UAAY,CACbrJ,EAAG,EAAGC,EAAG,EACTC,EAAGL,KAAKE,KAAKG,EAAGC,EAAGN,KAAKE,KAAKI,EAGzC,CAEA6F,MAAMrF,EAAMZ,GAKR,GAJIF,KAAKQ,SACLM,EAAKsF,SAASlG,EAAMF,KAAKQ,SAGzBR,KAAKoJ,MAAO,CAEZtI,EAAKwF,IAAIgD,UAAUtJ,KAAKoJ,MAAO,EAAG,EAAGpJ,KAAKwJ,UAAUrJ,EAAGH,KAAKwJ,UAAUpJ,EAAGJ,KAAKE,KAAKC,EAAGH,KAAKE,KAAKE,EAAGJ,KAAKwJ,UAAUrJ,EAAGH,KAAKwJ,UAAUpJ,GAEpIU,EAAKwF,IAAIgD,UAAUtJ,KAAKoJ,MAAOpJ,KAAKoJ,MAAMtH,MAAQ9B,KAAKwJ,UAAUrJ,EAAG,EAAGH,KAAKwJ,UAAUrJ,EAAGH,KAAKwJ,UAAUpJ,EAAGJ,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAIL,KAAKwJ,UAAUrJ,EAAGH,KAAKE,KAAKE,EAAGJ,KAAKwJ,UAAUrJ,EAAGH,KAAKwJ,UAAUpJ,GAEvMU,EAAKwF,IAAIgD,UAAUtJ,KAAKoJ,MAAO,EAAGpJ,KAAKoJ,MAAMrH,OAAS/B,KAAKwJ,UAAUpJ,EAAGJ,KAAKwJ,UAAUrJ,EAAGH,KAAKwJ,UAAUpJ,EAAGJ,KAAKE,KAAKC,EAAGH,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAIN,KAAKwJ,UAAUpJ,EAAGJ,KAAKwJ,UAAUrJ,EAAGH,KAAKwJ,UAAUpJ,GAExMU,EAAKwF,IAAIgD,UAAUtJ,KAAKoJ,MAAOpJ,KAAKoJ,MAAMtH,MAAQ9B,KAAKwJ,UAAUrJ,EAAGH,KAAKoJ,MAAMrH,OAAS/B,KAAKwJ,UAAUpJ,EAAGJ,KAAKwJ,UAAUrJ,EAAGH,KAAKwJ,UAAUpJ,EAAGJ,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAIL,KAAKwJ,UAAUrJ,EAAGH,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAIN,KAAKwJ,UAAUpJ,EAAGJ,KAAKwJ,UAAUrJ,EAAGH,KAAKwJ,UAAUpJ,GAG3Q,IAAK,IAAIkI,EAAKtI,KAAKE,KAAKC,EAAIH,KAAKwJ,UAAUrJ,EAAGmI,EAAKtI,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAIL,KAAKwJ,UAAUrJ,EAAGmI,GAAMtI,KAAKoJ,MAAMtH,MAA2B,EAAnB9B,KAAKwJ,UAAUrJ,EAAO,CAC5I,IAAIuJ,EAAK1J,KAAKoJ,MAAMtH,MAA2B,EAAnB9B,KAAKwJ,UAAUrJ,EACvCmI,EAAKoB,EAAK1J,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAIL,KAAKwJ,UAAUrJ,IACrDuJ,EAAK1J,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAIL,KAAKwJ,UAAUrJ,EAAImI,GAExDxH,EAAKwF,IAAIgD,UAAUtJ,KAAKoJ,MAAOpJ,KAAKwJ,UAAUrJ,EAAG,EAAGuJ,EAAI1J,KAAKwJ,UAAUpJ,EAAGkI,EAAItI,KAAKE,KAAKE,EAAGsJ,EAAI1J,KAAKwJ,UAAUpJ,EAClH,CAEA,IAAK,IAAIkI,EAAKtI,KAAKE,KAAKC,EAAIH,KAAKwJ,UAAUrJ,EAAGmI,EAAKtI,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAIL,KAAKwJ,UAAUrJ,EAAGmI,GAAMtI,KAAKoJ,MAAMtH,MAA2B,EAAnB9B,KAAKwJ,UAAUrJ,EAAO,CAC5I,IAAIuJ,EAAK1J,KAAKoJ,MAAMtH,MAA2B,EAAnB9B,KAAKwJ,UAAUrJ,EACvCmI,EAAKoB,EAAK1J,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAIL,KAAKwJ,UAAUrJ,IACrDuJ,EAAK1J,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAIL,KAAKwJ,UAAUrJ,EAAImI,GAExDxH,EAAKwF,IAAIgD,UAAUtJ,KAAKoJ,MAAOpJ,KAAKwJ,UAAUrJ,EAAGH,KAAKoJ,MAAMrH,OAAS/B,KAAKwJ,UAAUpJ,EAAGsJ,EAAI1J,KAAKwJ,UAAUpJ,EAAGkI,EAAItI,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAIN,KAAKwJ,UAAUpJ,EAAGsJ,EAAI1J,KAAKwJ,UAAUpJ,EACtL,CAGA,IAAK,IAAImI,EAAKvI,KAAKE,KAAKE,EAAIJ,KAAKwJ,UAAUpJ,EAAGmI,EAAKvI,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAIN,KAAKwJ,UAAUpJ,EAAGmI,GAAMvI,KAAKoJ,MAAMrH,OAA4B,EAAnB/B,KAAKwJ,UAAUpJ,EAAO,CAC7I,IAAIuJ,EAAK3J,KAAKoJ,MAAMrH,OAA4B,EAAnB/B,KAAKwJ,UAAUpJ,EACxCmI,EAAKoB,EAAK3J,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAIN,KAAKwJ,UAAUpJ,IACrDuJ,EAAK3J,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAIN,KAAKwJ,UAAUpJ,EAAImI,GAExDzH,EAAKwF,IAAIgD,UAAUtJ,KAAKoJ,MAAO,EAAGpJ,KAAKwJ,UAAUpJ,EAAGJ,KAAKwJ,UAAUrJ,EAAGwJ,EAAI3J,KAAKE,KAAKC,EAAGoI,EAAIvI,KAAKwJ,UAAUrJ,EAAGwJ,EACjH,CAEA,IAAK,IAAIpB,EAAKvI,KAAKE,KAAKE,EAAIJ,KAAKwJ,UAAUpJ,EAAGmI,EAAKvI,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAIN,KAAKwJ,UAAUpJ,EAAGmI,GAAMvI,KAAKoJ,MAAMrH,OAA4B,EAAnB/B,KAAKwJ,UAAUpJ,EAAO,CAC7I,IAAIuJ,EAAK3J,KAAKoJ,MAAMrH,OAA4B,EAAnB/B,KAAKwJ,UAAUpJ,EACxCmI,EAAKoB,EAAK3J,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAIN,KAAKwJ,UAAUpJ,IACrDuJ,EAAK3J,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAIN,KAAKwJ,UAAUpJ,EAAImI,GAExDzH,EAAKwF,IAAIgD,UAAUtJ,KAAKoJ,MAAOpJ,KAAKoJ,MAAMtH,MAAQ9B,KAAKwJ,UAAUrJ,EAAGH,KAAKwJ,UAAUpJ,EAAGJ,KAAKwJ,UAAUrJ,EAAGwJ,EAAI3J,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAIL,KAAKwJ,UAAUrJ,EAAGoI,EAAIvI,KAAKwJ,UAAUrJ,EAAGwJ,EACpL,CAGA,IAAIC,EAAK5J,KAAKwJ,UAAUrJ,EACpB0J,EAAK7J,KAAKwJ,UAAUpJ,EACpB0J,EAAK9J,KAAKoJ,MAAMtH,MAA2B,EAAnB9B,KAAKwJ,UAAUrJ,EACvC4J,EAAK/J,KAAKoJ,MAAMrH,OAA4B,EAAnB/B,KAAKwJ,UAAUpJ,EACxCkI,EAAKtI,KAAKwJ,UAAUrJ,EAAIH,KAAKE,KAAKC,EAClCoI,EAAKvI,KAAKwJ,UAAUpJ,EAAIJ,KAAKE,KAAKE,EACtC,KAAOmI,EAAKvI,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAIN,KAAKwJ,UAAUpJ,GAAG,CACtD,IAAIC,EAAIyJ,EACJxJ,EAAIyJ,EACJzB,EAAKjI,EAAIL,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAIL,KAAKwJ,UAAUrJ,IACpDE,EAAIL,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAIL,KAAKwJ,UAAUrJ,EAAImI,GAEnDC,EAAKjI,EAAIN,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAIN,KAAKwJ,UAAUpJ,IACpDE,EAAIN,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAIN,KAAKwJ,UAAUpJ,EAAImI,GAEvDzH,EAAKwF,IAAIgD,UAAUtJ,KAAKoJ,MAAOQ,EAAIC,EAAIxJ,EAAGC,EAAGgI,EAAIC,EAAIlI,EAAGC,GACxDgI,GAAMwB,EACFxB,EAAKtI,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAIL,KAAKwJ,UAAUrJ,IAChDmI,EAAKtI,KAAKwJ,UAAUrJ,EAAIH,KAAKE,KAAKC,EAClCoI,GAAMwB,EAEd,CACJ,CACA,IAAItG,EAAMzD,KAAKS,KAAKuC,QAAU9C,EAAKG,EAAI,GAAKS,EAAKD,KAAKoC,OAASjD,KAAKS,KAAKoG,OAAO,EAAGnC,UAAUxE,EAAKG,EAAI,GAAKS,EAAKD,KAAKoC,SAAWjD,KAAKS,KAErIK,EAAKiF,SAAS7F,EAAKC,EAAIH,KAAKwJ,UAAUrJ,EAAGD,EAAKE,EAAIJ,KAAKwJ,UAAUpJ,EAAGqD,EAAKzD,KAAKO,MAClF,GCyBJ,EA3HA,cAA0B,EACtBX,YAAYC,GACR+G,MAAM/G,GAENG,KAAKoJ,MAAQvJ,EAAOuJ,MAAQvJ,EAAOuJ,MAAQ,KAC3CpJ,KAAKgK,UAAYnK,EAAOmK,UAAYnK,EAAOmK,UAAY,KACvDhK,KAAKiK,WAAapK,EAAOoK,WAAapK,EAAOoK,WAAa,KAE1DjK,KAAKkK,eAAiBrK,EAAOqK,eAAiBrK,EAAOqK,eAAiB,EAElErK,EAAO2J,UACPxJ,KAAKwJ,UAAY3J,EAAO2J,UACjB3J,EAAO4J,YACdzJ,KAAKwJ,UAAY,CACbrJ,EAAGN,EAAO4J,YACVrJ,EAAGP,EAAO4J,YACVpJ,EAAGL,KAAKE,KAAKG,EAAyB,EAArBR,EAAO4J,YACxBnJ,EAAGN,KAAKE,KAAKI,EAAyB,EAArBT,EAAO4J,aAG5BzJ,KAAKwJ,UAAY,CACbrJ,EAAG,EAAGC,EAAG,EACTC,EAAGL,KAAKE,KAAKG,EAAGC,EAAGN,KAAKE,KAAKI,EAGzC,CAEA6J,eAAerJ,EAAMsI,GACjB,GAAIA,EAAO,CAEPtI,EAAKwF,IAAIgD,UAAUF,EAAO,EAAG,EAAGpJ,KAAKwJ,UAAUrJ,EAAGH,KAAKwJ,UAAUpJ,EAAGJ,KAAKE,KAAKC,EAAGH,KAAKE,KAAKE,EAAGJ,KAAKwJ,UAAUrJ,EAAGH,KAAKwJ,UAAUpJ,GAG/H,IAAIgK,EAAKhB,EAAMtH,OAAS9B,KAAKwJ,UAAUrJ,EAAIH,KAAKwJ,UAAUnJ,GAC1DS,EAAKwF,IAAIgD,UAAUF,EAAOA,EAAMtH,MAAQsI,EAAI,EAAGA,EAAIpK,KAAKwJ,UAAUpJ,EAAGJ,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAI+J,EAAIpK,KAAKE,KAAKE,EAAGgK,EAAIpK,KAAKwJ,UAAUpJ,GAGrI,IAAIiK,EAAKjB,EAAMrH,QAAU/B,KAAKwJ,UAAUpJ,EAAIJ,KAAKwJ,UAAUlJ,GAC3DQ,EAAKwF,IAAIgD,UAAUF,EAAOA,EAAMtH,MAAQsI,EAAIhB,EAAMrH,OAASsI,EAAID,EAAIC,EAAIrK,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAI+J,EAAIpK,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAI+J,EAAID,EAAIC,GAG3IvJ,EAAKwF,IAAIgD,UAAUF,EAAO,EAAGA,EAAMrH,OAASsI,EAAIrK,KAAKwJ,UAAUrJ,EAAGkK,EAAIrK,KAAKE,KAAKC,EAAGH,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAI+J,EAAIrK,KAAKwJ,UAAUrJ,EAAGkK,GAGrI,IAAK,IAAI/B,EAAKtI,KAAKE,KAAKC,EAAIH,KAAKwJ,UAAUrJ,EAAGmI,EAAKtI,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAI+J,EAAI9B,GAAMtI,KAAKwJ,UAAUnJ,EAAG,CACvG,IAAIqJ,EAAKN,EAAMtH,MAAQsI,EACnB9B,EAAKoB,EAAK1J,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAI+J,IACtCV,EAAK1J,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAI+J,EAAK9B,GAE1CxH,EAAKwF,IAAIgD,UAAUF,EAAOpJ,KAAKwJ,UAAUrJ,EAAG,EAAGuJ,EAAI1J,KAAKwJ,UAAUpJ,EAAGkI,EAAItI,KAAKE,KAAKE,EAAGsJ,EAAI1J,KAAKwJ,UAAUpJ,EAC7G,CAEA,IAAK,IAAIkI,EAAKtI,KAAKE,KAAKC,EAAIH,KAAKwJ,UAAUrJ,EAAGmI,EAAKtI,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAI+J,EAAI9B,GAAMtI,KAAKwJ,UAAUnJ,EAAG,CACvG,IAAIqJ,EAAKN,EAAMtH,MAAQsI,EACnB9B,EAAKoB,EAAK1J,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAI+J,IACtCV,EAAK1J,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAI+J,EAAK9B,GAE1CxH,EAAKwF,IAAIgD,UAAUF,EAAOpJ,KAAKwJ,UAAUrJ,EAAGiJ,EAAMrH,OAASsI,EAAIX,EAAIW,EAAI/B,EAAItI,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAI+J,EAAIX,EAAIW,EACnH,CAGA,IAAK,IAAI9B,EAAKvI,KAAKE,KAAKE,EAAIJ,KAAKwJ,UAAUpJ,EAAGmI,EAAKvI,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAI+J,EAAI9B,GAAMvI,KAAKwJ,UAAUlJ,EAAG,CACvG,IAAIqJ,EAAKP,EAAMrH,OAASsI,EACpB9B,EAAKoB,EAAK3J,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAI+J,IACtCV,EAAK3J,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAI+J,EAAK9B,GAE1CzH,EAAKwF,IAAIgD,UAAUF,EAAO,EAAGpJ,KAAKwJ,UAAUpJ,EAAGJ,KAAKwJ,UAAUrJ,EAAGwJ,EAAI3J,KAAKE,KAAKC,EAAGoI,EAAIvI,KAAKwJ,UAAUrJ,EAAGwJ,EAC5G,CAEA,IAAK,IAAIpB,EAAKvI,KAAKE,KAAKE,EAAIJ,KAAKwJ,UAAUpJ,EAAGmI,EAAKvI,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAI+J,EAAI9B,GAAMvI,KAAKwJ,UAAUlJ,EAAG,CACvG,IAAIqJ,EAAKP,EAAMrH,OAASsI,EACpB9B,EAAKoB,EAAK3J,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAI+J,IACtCV,EAAK3J,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAI+J,EAAK9B,GAE1CzH,EAAKwF,IAAIgD,UAAUF,EAAOA,EAAMtH,MAAQsI,EAAIpK,KAAKwJ,UAAUpJ,EAAGgK,EAAIT,EAAI3J,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAI+J,EAAI7B,EAAI6B,EAAIT,EAClH,CAIA,IAAIC,EAAK5J,KAAKwJ,UAAUrJ,EACpB0J,EAAK7J,KAAKwJ,UAAUpJ,EACpB0J,EAAK9J,KAAKwJ,UAAUnJ,EACpB0J,EAAK/J,KAAKwJ,UAAUlJ,EACpBgI,EAAKtI,KAAKwJ,UAAUrJ,EAAIH,KAAKE,KAAKC,EAClCoI,EAAKvI,KAAKwJ,UAAUpJ,EAAIJ,KAAKE,KAAKE,EACtC,KAAOmI,EAAKvI,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAI+J,GAAI,CACxC,IAAIhK,EAAIyJ,EACJxJ,EAAIyJ,EACJzB,EAAKjI,EAAIL,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAI+J,IACrC/J,EAAIL,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAI+J,EAAK9B,GAErCC,EAAKjI,EAAIN,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAI+J,IACrC/J,EAAIN,KAAKE,KAAKE,EAAIJ,KAAKE,KAAKI,EAAI+J,EAAK9B,GAEzCzH,EAAKwF,IAAIgD,UAAUF,EAAOQ,EAAIC,EAAIxJ,EAAGC,EAAGgI,EAAIC,EAAIlI,EAAGC,GACnDgI,GAAMwB,EACFxB,EAAKtI,KAAKE,KAAKC,EAAIH,KAAKE,KAAKG,EAAI+J,IACjC9B,EAAKtI,KAAKwJ,UAAUrJ,EAAIH,KAAKE,KAAKC,EAClCoI,GAAMwB,EAEd,CACJ,CACJ,CAEA5D,MAAMrF,EAAMZ,GACR,IAAIoK,EAAOtK,KAAKe,MAAMG,UAAYlB,KAAKkK,eAAiB,EACpDK,EAAOvK,KAAKuC,QAAUvC,KAAKiG,UAAYjG,KAAKO,MAE5CP,KAAKuC,UAAYvC,KAAKe,MAAMG,WAAalB,KAAKiK,WAC9CjK,KAAKmK,eAAerJ,EAAMd,KAAKiK,YACxBjK,KAAKe,MAAMG,WAAalB,KAAKgK,UACpChK,KAAKmK,eAAerJ,EAAMd,KAAKgK,WAE/BhK,KAAKmK,eAAerJ,EAAMd,KAAKoJ,OAGnC,IAAI3F,EAAMzD,KAAKS,KAAKuC,QAAU9C,EAAKG,EAAI,GAAKS,EAAKD,KAAKoC,OAASjD,KAAKS,KAAKoG,OAAO,EAAGnC,UAAUxE,EAAKG,EAAI,GAAKS,EAAKD,KAAKoC,SAAWjD,KAAKS,KAGrIK,EAAKiF,SAAS7F,EAAKC,EAAKD,EAAKG,EAAI,EAAMoD,EAAIT,OAASlC,EAAKD,KAAKoC,OAAU,EAAG/C,EAAKE,EAAKF,EAAKI,EAAI,EAAMQ,EAAKD,KAAKqC,QAAU,EAAKoH,EAAM7G,EAAK8G,EAC5I,GCxHJ,MAAMC,EACF5K,YAAY6K,EAAQ5J,GAChBb,KAAKyK,OAASA,EACdzK,KAAK0K,eAAiBD,EACtBzK,KAAKsG,IAAMmE,EAAOxI,WAAW,MAC7BjC,KAAK2K,YAAc3K,KAAKsG,IACxBhB,QAAQsF,mBACR5K,KAAKa,KAAOA,GAAcyE,QAAQC,MAAM,WAExCvF,KAAK6K,SAAW,KAEhB7K,KAAKsD,SAAW,CAAEnD,EAAG,EAAGC,EAAG,GAC3BJ,KAAKuD,YAAc,EAEnBvD,KAAKoD,OAAS,KACdpD,KAAK8K,SAAW,GAChB9K,KAAK+K,cAAgB,GAErB/K,KAAKgL,SAAW,IACL,GAGXhL,KAAKyK,OAAOQ,iBAAiB,aAAcjH,IACnChE,KAAKkL,YACLlL,KAAKsD,SAASnD,EAAIuE,UAAUV,EAAEmH,QAAUV,EAAOW,aAAepL,KAAKyK,OAAO3I,MAAQ4C,SAAS1E,KAAKyK,OAAOY,MAAMvJ,SAC7G9B,KAAKsD,SAASlD,EAAIsE,UAAUV,EAAEsH,QAAUb,EAAOc,YAAcvL,KAAKyK,OAAO1I,OAAS2C,SAAS1E,KAAKyK,OAAOY,MAAMtJ,UACjH,IAGJ/B,KAAKyK,OAAOQ,iBAAiB,aAAcjH,IACnChE,KAAKkL,YACLlL,KAAKuD,YAAcS,EAAEwH,QACzB,IAGJxL,KAAKyK,OAAOQ,iBAAiB,WAAYjH,IACjChE,KAAKkL,YACLlL,KAAKuD,YAAc,EACvB,IAGJkI,OAAOR,iBAAiB,WAAYjH,IAC5BhE,KAAKkL,WACS,QAAVlH,EAAEnF,KACNmF,EAAE0H,gBAEN,IAGJD,OAAOR,iBAAiB,SAAUjH,IAC9B,GAAIhE,KAAKkL,UACL,GAAIlL,KAAKoD,OAAQ,CACb,IAAIuI,EAAU3L,KAAK8K,SAASlH,QAAOC,QAAWpF,IAANoF,IAAiBD,QAAOC,GAAKA,EAAE/D,KAAOE,KAAKoD,SAYnF,GAXIuI,EAAQ3I,OAAS,GAAK2I,EAAQ,GAAGrE,WACZ,IAAjBtD,EAAEnF,IAAImE,QACN2I,EAAQ,GAAGjL,SAAWiL,EAAQ,GAAGlL,KACjCkL,EAAQ,GAAGlL,MAAQuD,EAAEnF,KACJ,cAAVmF,EAAEnF,KACT8M,EAAQ,GAAGjL,SAAWiL,EAAQ,GAAGlL,KACjCkL,EAAQ,GAAGlL,KAAOkL,EAAQ,GAAGlL,KAAKyE,UAAU,EAAGyG,EAAQ,GAAGlL,KAAKuC,OAAS,IACvD,UAAVgB,EAAEnF,MACTmB,KAAKoD,OAAS,OAGlBuI,EAAQ3I,OAAS,GACH,QAAVgB,EAAEnF,IAAe,CACjB,IAAIoG,EAAQjF,KAAK8K,SAASc,WAAU/H,GAAKA,EAAE/D,KAAOE,KAAKoD,SACnD6B,EAAQ,EAAIjF,KAAK8K,SAAS9H,OAC1BiC,IAEAA,EAAQ,EAEZjF,KAAKoD,OAASpD,KAAK8K,SAAS7F,GAAOnF,EACvC,CAER,MAAWE,KAAK8K,SAAS9H,OAAS,GAChB,QAAVgB,EAAEnF,MACFmB,KAAKoD,OAASpD,KAAK8K,SAAS,GAAGhL,IAI3C,OAAO,KAGXE,KAAK6L,QACT,CAEAC,UACI9L,KAAKkL,WAAY,CACrB,CAEAW,SACI7L,KAAKkL,WAAY,EACjBlL,KAAK+L,cACT,CAGAA,eACI,IACI,GAAI/L,KAAKkL,UAAW,CAChB,IAAIc,EAAehM,KAAK8K,SAASmB,KAAIC,GAAMA,EAAGpM,KAE9CE,KAAK+K,cAAgB,GAErB/K,KAAK8K,SAAW9K,KAAK8K,SAASlH,QAAOC,QAAWpF,IAANoF,IAC1C7D,KAAKgL,SAAShL,MAEd,IAAK,IAAIF,KAAMkM,EAC2D,IAAlEhM,KAAK+K,cAAcnH,QAAOC,GAAKA,IAAMmI,EAAalM,KAAKkD,SACvDhD,KAAK8K,SAAS9K,KAAK8K,SAASc,WAAU/H,QAAWpF,IAANoF,GAAmBA,EAAE/D,KAAOkM,EAAalM,WAAQrB,GAGpGuB,KAAK8K,SAAW9K,KAAK8K,SAASlH,QAAOC,QAAWpF,IAANoF,IAE1C7D,KAAK4C,SAELuJ,YAAW,IAAMnM,KAAK+L,gBAAgB,GAC1C,CAC2B,CAA7B,MAAO/H,GAAKC,QAAQmI,MAAMpI,EAAG,CACnC,CAEAqI,cAAc5B,GACVzK,KAAKyK,OAASA,EACdzK,KAAKsG,IAAMmE,EAAOxI,WAAW,KACjC,CAEAqK,eACItM,KAAKyK,OAASzK,KAAK0K,eACnB1K,KAAKsG,IAAMtG,KAAK2K,WACpB,CAEA4B,cAAczM,GAEV,GADYE,KAAK8K,SAASc,WAAU/H,GAAKA,EAAE/D,KAAOA,KACrC,EAAG,CACZ,IAAIgL,EAAW,GACf,IAAK,IAAI9G,KAAKhE,KAAK8K,SAAU,CACzB,IAAIa,EAAU3L,KAAK8K,SAAS9G,GACxB2H,EAAQ7L,KAAOA,GACfgL,EAASjG,KAAK8G,EAEtB,CACA3L,KAAK8K,SAAWA,CACpB,CACJ,CAEA0B,iBACIxM,KAAK8K,SAAW,EACpB,CAEA2B,aAAa3M,GACT,IAAImF,EAAQjF,KAAK8K,SAASc,WAAU/H,GAAKA,EAAE/D,KAAOA,IAClD,GAAImF,GAAS,EAAG,CACZ,IAAI6F,EAAW,GACX7F,EAAQ,GAAK,IACb6F,EAAW9K,KAAK8K,SAAShG,MAAM,EAAGG,IAElCA,EAAQ,GAAKjF,KAAK8K,SAAS9H,OAAS,GACpC8H,EAASjG,QAAQ7E,KAAK8K,SAAShG,MAAMG,EAAQ,IAEjD6F,EAASjG,KAAK7E,KAAK8K,SAAS7F,IAC5BjF,KAAK8K,SAAWA,CACpB,CACJ,CAEAtH,gBAAgBC,GACZ,IAAI5C,EAAOb,KAAKa,KACZ6C,EAAQ,GACZ,IACuB,iBAARD,IACPA,EAAM5C,EAAK8C,SAASC,QAAOC,GAAKA,EAAEC,aAAeL,IAAK,GAAGM,QAE7DL,EAAQD,EAAIN,MAAM,KAGtB,CAFE,MAAOa,GACLC,QAAQC,IAAI,mCAAoCF,EAAG,uBAAwBP,EAC/E,CACA,IAAIpD,EAAI,EACR,IAAK,IAAI8D,KAAKT,EAAO,CACjB,IAAIU,EAAOV,EAAMS,GACbC,EAAKpB,OAASnC,EAAKoC,OAAS5C,IAC5BA,EAAI+D,EAAKpB,OAASnC,EAAKoC,OAE/B,CACA,OAAO5C,CACX,CAEAqM,QAAQ7M,GACJA,EAAO8M,KAAO9M,EAAO8M,KAAO9M,EAAO8M,KAAO,UAC1C,IAAIC,EAAO5M,KAAK8K,SAASlH,QAAOC,GAAKA,EAAE/D,KAAOD,EAAOC,KACrD,GAAoB,IAAhB8M,EAAK5J,OAAc,CACnB,IACIkJ,EAAK,ICrLrB,SAAwBS,GACpB,OAAOA,EAAKE,eACR,IAAK,UACD,OAAO,EACX,IAAK,YACD,OAAO,EACX,IAAK,UACD,OAAO,EACX,IAAK,WACD,OAAO,EACX,IAAK,aACD,OAAO,EACX,IAAK,cACD,OAAO,EACX,IAAK,OACD,OAAO,EACX,IAAK,QACD,OAAO,EACX,IAAK,aACD,OAAO,EACX,IAAK,cACD,OAAO,EAEnB,CD6J+BC,CAAejN,EAAO8M,MAChC,CAAiB9M,GAK1B,OAJAqM,EAAGtJ,OAAO5C,MAAM,GAChBA,KAAK8K,SAASjG,KAAKqH,GACnBlM,KAAK+K,cAAclG,KAAKhF,EAAOC,IAC/BE,KAAK6K,SAAWqB,EAAGhM,KACZgM,CACX,CACIlM,KAAK+K,cAAclG,KAAKhF,EAAOC,IAC/B,IAAK,IAAI6C,KAAK9C,EACV+M,EAAK,GAAGjK,GAAK9C,EAAO8C,GAGxB,OADA3C,KAAK6K,SAAW+B,EAAK,GAAG1M,KACjB0M,EAAK,EAEpB,CAEAG,OAAOlN,GAqBH,OApBAA,EAAOmN,OAASnN,EAAOmN,OAASnN,EAAOmN,OAAS,MAC5ChN,KAAK6K,WACDhL,EAAOmN,OAAOC,SAAS,OACnBpN,EAAOK,MACPL,EAAOK,KAAKC,GAAKH,KAAK6K,SAAS1K,EAC/BN,EAAOK,KAAKE,GAAKJ,KAAK6K,SAASzK,EAAIJ,KAAK6K,SAASvK,IAEjDT,EAAOM,GAAKH,KAAK6K,SAAS1K,EAC1BN,EAAOO,GAAKJ,KAAK6K,SAASzK,EAAIJ,KAAK6K,SAASvK,GAEzCT,EAAOmN,OAAOC,SAAS,YAC1BpN,EAAOK,MACPL,EAAOK,KAAKC,GAAKH,KAAK6K,SAAS1K,EAAIH,KAAK6K,SAASxK,EACjDR,EAAOK,KAAKE,GAAKJ,KAAK6K,SAASzK,IAE/BP,EAAOM,GAAKH,KAAK6K,SAAS1K,EAAIH,KAAK6K,SAASxK,EAC5CR,EAAOO,GAAKJ,KAAK6K,SAASzK,KAI/BJ,KAAK0M,QAAQ7M,EACxB,CAEAqG,aAAarF,EAAMV,EAAGC,EAAGK,EAAMF,EAAO2M,GAClC,QAAazO,IAATgC,GAA+B,KAATA,EAG1B,OAAO6E,QAAQS,SAAS/F,KAAKsG,IAAK5B,SAASvE,GAAIuE,SAAStE,GAAIK,EAAMF,EAAOM,EAAMqM,EACnF,CAEAnH,SAAS5F,EAAGC,EAAGK,EAAMF,EAAO2M,GACxB,OAAOlN,KAAKkG,aAAalG,KAAKa,KAAMV,EAAGC,EAAGK,EAAMF,EAAO2M,EAC3D,CAEA9G,SAASlG,EAAMK,GACXP,KAAKsG,IAAI6G,UAAY5M,EACrBP,KAAKsG,IAAI8G,SAASlN,EAAKC,EAAGD,EAAKE,EAAGF,EAAKG,EAAGH,EAAKI,EACnD,CAEAyG,WAAW7G,EAAMK,GACbP,KAAKsG,IAAI+G,UAAY,EACrBrN,KAAKsG,IAAIgH,YAAc/M,EACvBP,KAAKsG,IAAIiH,WAAW7I,SAASxE,EAAKC,GAAK,GAAKuE,SAASxE,EAAKE,GAAK,GAAKsE,SAASxE,EAAKG,GAAIqE,SAASxE,EAAKI,GACxG,CACA4G,WAAW/G,EAAGC,EAAGgK,EAAIC,EAAI9J,GACrBP,KAAKsG,IAAI+G,UAAY,EACrBrN,KAAKsG,IAAIgH,YAAc/M,EAEvBP,KAAKsG,IAAIE,YACTxG,KAAKsG,IAAIkH,OAAO9I,SAASvE,GAAK,GAAKuE,SAAStE,GAAK,IACjDJ,KAAKsG,IAAImH,OAAO/I,SAAS0F,GAAM,GAAK1F,SAAS2F,GAAM,IACnDrK,KAAKsG,IAAIoH,QACb,CAEA9K,SACI,IAAIC,GAAe,EACnB,IAAK,IAAImB,EAAIhE,KAAK8K,SAAS9H,OAAS,EAAGgB,GAAK,EAAGA,KACtCnB,GAAgB7C,KAAK8K,SAAS9G,KAC/BnB,EAAe7C,KAAK8K,SAAS9G,GAAGpB,OAAO5C,KAAM6C,GAGzD,CAEAwD,OACI,IAAK,IAAIrC,KAAKhE,KAAK8K,SACX9K,KAAK8K,SAAS9G,IACdhE,KAAK8K,SAAS9G,GAAGqC,KAAKrG,KAGlC,E","sources":["webpack://imui/webpack/universalModuleDefinition","webpack://imui/external umd \"canvas\"","webpack://imui/webpack/bootstrap","webpack://imui/webpack/runtime/define property getters","webpack://imui/webpack/runtime/hasOwnProperty shorthand","webpack://imui/webpack/runtime/make namespace object","webpack://imui/./src/elements/Element.js","webpack://imui/./src/elements/FrameFlat.js","webpack://imui/./src/elements/Frame3d.js","webpack://imui/./src/elements/Button3d.js","webpack://imui/./src/elements/ButtonFlat.js","webpack://imui/./src/elements/TextBoxFlat.js","webpack://imui/./src/elements/List.js","webpack://imui/./src/elements/Image.js","webpack://imui/./src/elements/FrameImage.js","webpack://imui/./src/elements/ButtonImage.js","webpack://imui/./src/imui.js","webpack://imui/./src/elements.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"canvas\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"canvas\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"imui\"] = factory(require(\"canvas\"));\n\telse\n\t\troot[\"imui\"] = factory(root[\"canvas\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__517__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__517__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { createCanvas } from 'canvas'\r\n\r\nclass Element {\r\n    constructor(params) {\r\n        if (!params.id) {\r\n            throw new Error('Element must have unique id.')\r\n        }\r\n        this.id = params.id\r\n\r\n        this.autosize = params.autosize ? params.autosize : true\r\n        if (params.rect) {\r\n            this.autosize = false\r\n        }\r\n        this.rect = params.rect ? params.rect : { x: 0, y: 0, w: 0, h: 0 }\r\n        this.color = params.color ? params.color : '#ccccccff'\r\n        this.bgcolor = params.bgcolor ? params.bgcolor : undefined\r\n        this.text = params.text ? params.text : ''\r\n        this.prevText = this.text\r\n        this.parentRect = params.parentRect ? params.parentRect : null\r\n        \r\n        this.wrap = params.wrap ? params.wrap : ''\r\n\r\n        this.font = params.font ? params.font : imui.font\r\n\r\n        this.rect.x = params.x ? params.x : this.rect.x\r\n        this.rect.y = params.y ? params.y : this.rect.y\r\n\r\n        this.state = {\r\n            clicked: false,\r\n            mouseOver: false,\r\n            mouseDown: false,\r\n            mouseUp: false,\r\n            change: true\r\n        }\r\n        this.prevState = params.prevState ? params.prevState :\r\n            {\r\n                clicked: false,\r\n                mouseOver: false,\r\n                mouseDown: false,\r\n                mouseUp: false,\r\n                change: false\r\n            }\r\n\r\n        this.buffer = null\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer()\r\n        }\r\n    }\r\n\r\n    InitializeBuffer(margin) {\r\n        let mx = 0, my = 0\r\n        if (margin) {\r\n            mx = margin.x\r\n            my = margin.y\r\n            this.margin = margin\r\n        } else {\r\n            this.margin = { x: 0, y: 0 }\r\n        }\r\n        try {\r\n            this.buffer = document.createElement('canvas')\r\n            this.buffer.width = this.rect.w + mx\r\n            this.buffer.height = this.rect.h + my\r\n            this.bufferCtx = this.buffer.getContext('2d')\r\n        } catch {\r\n            this.buffer = createCanvas(this.rect.w + mx, this.rect.h + my)\r\n            this.bufferCtx = this.buffer.getContext('2d')\r\n        }\r\n    }\r\n\r\n    DidChangeState() {\r\n        return this.prevState.clicked !== this.state.clicked ||\r\n            this.prevState.mouseOver !== this.state.mouseOver ||\r\n            this.prevState.mouseDown !== this.state.mouseDown ||\r\n            this.prevState.mouseUp !== this.state.mouseUp ||\r\n            this.prevState.change !== this.state.change\r\n    }\r\n\r\n    BuildPreviousState() {\r\n        return {\r\n            clicked: this.state.clicked,\r\n            mouseOver: this.state.mouseOver,\r\n            mouseDown: this.state.mouseDown,\r\n            mouseUp: this.state.mouseUp,\r\n            change: this.state.change\r\n        }\r\n    }\r\n\r\n    InsideRect(x, y, rect) {\r\n        let r = rect ? rect : this.rect\r\n        return x >= r.x && x < r.x + r.w && y >= r.y && y < r.y + r.h\r\n    }\r\n\r\n    Clicked() { return this.state.clicked }\r\n    Hover() { return this.state.mouseOver }\r\n    MouseDown() { return this.state.mouseDown }\r\n    MouseUp() { return this.state.mouseUp }\r\n\r\n    setState(params) {\r\n        this.prevState = this.BuildPreviousState()\r\n        for (let p in params) {\r\n            this.state[p] = params[p]\r\n        }\r\n    }\r\n\r\n    Update(imui, eventHandled) {\r\n        let evt = false\r\n        let cfont = this.font ? this.font : imui.font\r\n        if (this.autosize) {\r\n            this.rect.w = this.text.length * cfont.cwidth\r\n            this.rect.h = cfont.cheight\r\n            if (this.text && this.text.length > 0) {\r\n                this.rect.h = cfont.cheight * this.text.split('\\n').length\r\n            }\r\n        }\r\n        if (this.state.clicked && this.id !== imui.active) {\r\n            imui.active = this.id\r\n            this.setState({ changed: true })\r\n            evt = true\r\n        }\r\n        if (imui.mousePos.x >= this.rect.x && imui.mousePos.y >= this.rect.y && imui.mousePos.x <= this.rect.x + this.rect.w && imui.mousePos.y <= this.rect.y + this.rect.h) {\r\n            if (this.state.mouseOver && this.state.clicked) {\r\n                this.setState({ mouseOver: true, clicked: false})\r\n                evt = true\r\n            } else if (!eventHandled) {\r\n                this.setState({ mouseOver: true })\r\n                evt = true\r\n            }\r\n            if (imui.mouseButton > 0 && !this.state.mouseDown) {\r\n                this.setState({ mouseDown: true, mouseButton: imui.mouseButton })\r\n                evt = true\r\n            } else if (imui.mouseButton === 0 && this.prevState.mouseDown) {\r\n                this.setState({ mouseUp: true, mouseDown: false })\r\n                evt = true\r\n            }\r\n        } else {\r\n            this.setState({ mouseOver: false, mouseDown: false, mouseUp: false, clicked: false })\r\n        }\r\n        if (imui.mouseButton === 0 && this.state.mouseUp) {\r\n            this.setState({ mouseUp: false, clicked: true })\r\n            imui.active = this.id\r\n            evt = true\r\n        }\r\n        if (this.text !== this.prevText) {\r\n            this.setState({ change: true })\r\n            this.prevText = this.text\r\n        } else {\r\n            this.setState({ change: false })\r\n        }        \r\n        \r\n        return evt\r\n    }\r\n\r\n    GetMaxTextWidth(font, txt) {\r\n        let lines = []\r\n        try {\r\n            if (typeof txt === 'number') {\r\n                txt = font.codepage.filter(f => f.codenumber === txt)[0].symbol\r\n            }\r\n            lines = txt.split('\\n')\r\n        } catch (e) {\r\n            console.log('Error splitting txt parameters: ', e, ' typeof txt =', typeof txt)\r\n        }\r\n        let w = 0\r\n        for (let l in lines) {\r\n            let line = lines[l]\r\n            let lineLen = 0\r\n            for (let c in line) {\r\n                let char = font.codepage.filter(f => f.symbol === line[c])\r\n                if (char.length > 0) {\r\n                    if (char[0].rect) {\r\n                        lineLen += char[0].rect.w\r\n                    }\r\n                }\r\n            }\r\n            if (lineLen > w) {\r\n                w = lineLen\r\n            }\r\n        }\r\n        return w\r\n    }\r\n\r\n    GetWrappedText(font, txt, rect) {\r\n        let lines = txt.split('\\n')\r\n        let wrapPos = parseInt(rect.w / font.cwidth)\r\n        let c = 0\r\n        while (this.GetMaxTextWidth(font, lines.join('\\n')) >= rect.w && c <= 100) {\r\n            let newLines = []\r\n            for (let l in lines) {\r\n                let lineWidth = lines[l].length * font.cwidth\r\n                if (lineWidth > rect.w) {\r\n                    newLines.push(lines[l].slice(0, wrapPos).trim(),\r\n                                    lines[l].slice(wrapPos, lines[l].length).trim())\r\n                } else {\r\n                    newLines.push(lines[l])\r\n                }\r\n            }\r\n            lines = newLines\r\n            c++\r\n        }\r\n        return lines.join('\\n')\r\n    }\r\n\r\n    GetWordWrappedText(font, txt, rect) {\r\n        let lines = txt.split('\\n')\r\n        let wrapPos = parseInt(rect.w / font.cwidth)\r\n        let c = 0\r\n        while (this.GetMaxTextWidth(font, lines.join('\\n')) >= rect.w && c <= 100) {\r\n            let newLines = []\r\n            for (let l in lines) {\r\n                let lineWidth = lines[l].length * font.cwidth\r\n                if (lineWidth > rect.w) {\r\n                    // newLines.push(lines[l].slice(0, wrapPos).trim(),\r\n                    //                 lines[l].slice(wrapPos, lines[l].length).trim())\r\n                    let line = lines[l].substring(0, wrapPos).split('').reverse().join('')\r\n                    let index = line.search(/\\s/)\r\n                    newLines.push(lines[l].slice(0, wrapPos - index).trim(),\r\n                                        lines[l].slice(wrapPos - index, lines[l].length).trim())\r\n                } else {\r\n                    newLines.push(lines[l])\r\n                }\r\n            }\r\n            lines = newLines\r\n            c++\r\n        }\r\n        return lines.join('\\n')\r\n    }\r\n\r\n    DoTextWrap(font) {\r\n        let txt = this.text ? this.text : ''\r\n\r\n        font = font ? font : bfontjs.Fonts().default\r\n        if (this.GetMaxTextWidth(font, txt) > this.rect.w) {\r\n            if (this.wrap === 'clip') {\r\n                let rectCharWidth = Math.floor(this.rect.w / font.cwidth)\r\n                txt = txt.substring(0, rectCharWidth)\r\n            } else if (this.wrap === 'ellipses') {\r\n                let rectCharWidth = Math.floor(this.rect.w / font.cwidth)\r\n                txt = txt.substring(0, rectCharWidth - 3)\r\n                txt += '...'\r\n            } else if (this.wrap === 'wrap') {\r\n                txt = this.GetWrappedText(font, txt, this.rect)\r\n            } else if (this.wrap === 'word-wrap') {\r\n                txt = this.GetWordWrappedText(font, txt, this.rect)\r\n            }\r\n        }\r\n        txt = typeof txt === 'string' ? txt : ''\r\n        let wid = this.GetMaxTextWidth(font, txt)\r\n        let hgt = txt.split('\\n').length * font.cheight\r\n        let ret = { text: txt, w: wid > this.rect.w ? wid : this.rect.w, h: hgt > this.rect.h ? hgt : this.rect.h }\r\n        if (this.autosize) {\r\n            this.rect = ret\r\n        }\r\n        return ret\r\n    }\r\n\r\n    DrawText(imui, font, rect) {\r\n        let textcolor = this.color\r\n        if (this.id === imui.active) {\r\n            textcolor = this.highlight ? this.highlight : textcolor\r\n        }\r\n        let wrap = this.DoTextWrap(font)\r\n        imui.DrawTextFont(font, rect.x, rect.y, wrap.text, textcolor)\r\n        rect.h = wrap.h\r\n        rect.w = wrap.w\r\n        this.rect = rect\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.bgcolor) {\r\n            imui.DrawRect(rect, this.bgcolor)\r\n        }\r\n        let cfont = this.font ? this.font : imui.font\r\n        this.DrawText(imui, cfont, rect)\r\n    }\r\n\r\n    Draw(imui) {\r\n        let rect = this.rect\r\n        let ctx = imui.ctx\r\n        ctx.save()\r\n        if (this.parentRect) {\r\n            rect.x += this.parentRect.x\r\n            rect.y += this.parentRect.y\r\n            ctx.beginPath()\r\n            ctx.rect(this.parentRect.x, this.parentRect.y, this.parentRect.w, this.parentRect.h)\r\n            ctx.closePath()\r\n            ctx.clip()\r\n        }\r\n        this._Draw(imui, rect)\r\n        ctx.restore()\r\n    }\r\n}\r\n\r\nexport default Element\r\n","import Element from './Element.js'\r\n\r\nclass FrameFlat extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.bgcolor) {\r\n            imui.DrawRect(rect, this.bgcolor)\r\n        }\r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        let borderRect = { x: rect.x + imui.font.cwidth / 2, y: rect.y + imui.font.cheight / 2, w: rect.w - imui.font.cwidth, h: rect.h - imui.font.cheight}\r\n        imui.StrokeRect(borderRect, this.color)\r\n\r\n        imui.DrawText(rect.x + imui.font.cwidth, rect.y + imui.font.cheight, txt, this.color)\r\n    }\r\n}\r\n\r\nexport default FrameFlat","import Element from './Element.js'\r\n\r\nclass Frame3d extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.bgcolor) {\r\n            imui.DrawRect(rect, this.bgcolor)\r\n        }\r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        let borderRect = { x: rect.x + imui.font.cwidth / 2, y: rect.y + imui.font.cheight / 2, w: rect.w - imui.font.cwidth, h: rect.h - imui.font.cheight}\r\n\r\n        let highlight = !this.inverted ? this.highlight : this.shadow\r\n        let shadow = !this.inverted ? this.shadow : this.highlight\r\n\r\n        imui.StrokeLine(borderRect.x, borderRect.y, borderRect.x + borderRect.w, borderRect.y, highlight)\r\n        imui.StrokeLine(borderRect.x + borderRect.w, borderRect.y, borderRect.x + borderRect.w, borderRect.y + borderRect.h, highlight)\r\n        imui.StrokeLine(borderRect.x, borderRect.y + borderRect.h, borderRect.x + borderRect.w, borderRect.y + borderRect.h, shadow)\r\n        imui.StrokeLine(borderRect.x, borderRect.y, borderRect.x, borderRect.y + borderRect.h, shadow)\r\n\r\n        imui.DrawText(rect.x + imui.font.cwidth, rect.y + imui.font.cheight, txt, this.color)\r\n    }\r\n}\r\n\r\nexport default Frame3d","import Element from './Element.js'\r\n\r\nclass Button3d extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.bgcolor) {\r\n            imui.DrawRect(rect, this.bgcolor)\r\n        }\r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        let borderRect = { x: rect.x + imui.font.cwidth / 2, y: rect.y + imui.font.cheight / 2, w: rect.w - imui.font.cwidth, h: rect.h - imui.font.cheight}\r\n        \r\n        let inverted = this.inverted ? this.inverted : false\r\n        if (this.state.mouseDown) {\r\n            inverted = true\r\n        }\r\n\r\n        let highlight = !inverted ? this.highlight : this.shadow\r\n        let shadow = !inverted ? this.shadow : this.highlight\r\n\r\n        imui.StrokeLine(borderRect.x, borderRect.y, borderRect.x + borderRect.w, borderRect.y, highlight)\r\n        imui.StrokeLine(borderRect.x + borderRect.w, borderRect.y, borderRect.x + borderRect.w, borderRect.y + borderRect.h, highlight)\r\n        imui.StrokeLine(borderRect.x, borderRect.y + borderRect.h, borderRect.x + borderRect.w, borderRect.y + borderRect.h, shadow)\r\n        imui.StrokeLine(borderRect.x, borderRect.y, borderRect.x, borderRect.y + borderRect.h, shadow)\r\n\r\n        let mx = 0, my = 0\r\n        if (this.state.mouseDown) {\r\n            mx = parseInt(imui.font.cwidth * 0.3)\r\n            my = parseInt(imui.font.cheight * 0.1)\r\n        }\r\n        imui.DrawText(borderRect.x + mx + borderRect.w / 2 - (txt.length * imui.font.cwidth) / 2, borderRect.y + my + borderRect.h / 2 - imui.font.cheight / 2, txt, this.color)\r\n    }\r\n}\r\n\r\nexport default Button3d","import Element from './Element.js'\r\n\r\nclass ButtonFlat extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        this.leftChar = params.leftChar ? params.leftChar : '<'\r\n        this.rightChar = params.rightChar ? params.rightChar : '>'\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        let textcolor = this.color\r\n        let bgcolor = this.bgcolor\r\n\r\n        if (this.state.mouseOver && !this.state.mouseDown && this.highlight) {\r\n            textcolor = this.highlight\r\n        }\r\n\r\n        if (bgcolor) {\r\n            if (this.state.mouseDown) {\r\n                textcolor = this.bgcolor\r\n                bgcolor = this.color\r\n            }\r\n\r\n            imui.DrawRect(rect, bgcolor)\r\n        }\r\n        if (this.id === imui.active) {\r\n            textcolor = this.highlight ? this.highlight : textcolor\r\n        }\r\n\r\n        imui.DrawText(rect.x + rect.w / 2 - (txt.length * imui.font.cwidth) / 2, rect.y + rect.h / 2 - imui.font.cheight / 2, txt, textcolor)\r\n\r\n        imui.DrawText(rect.x, rect.y + rect.h / 2 - imui.font.cheight / 2, this.leftChar, textcolor)\r\n        imui.DrawText(rect.x + rect.w - imui.font.cwidth, rect.y + rect.h / 2 - imui.font.cheight / 2, this.rightChar, textcolor)\r\n    }\r\n}\r\n\r\nexport default ButtonFlat","import Element from './Element.js'\r\n\r\nclass TextBoxFlat extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.text = params.defaultText ? params.defaultText : ''\r\n        this.font = params.font ? params.font : null\r\n\r\n        if (this.font) {\r\n            this.rect.h = parseInt((this.rect.h / this.font.cheight) * this.font.cheight)\r\n            this.rect.w = this.GetMaxTextWidth(this.font, this.text)\r\n        } else {\r\n            this.rect.w = 8\r\n            this.rect.h = 8\r\n        }\r\n            \r\n        this.editable = params.editable ? params.editable : true\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    Text() { return this.text }\r\n\r\n    _Draw(imui, rect) {\r\n        if (!this.font) {\r\n            this.font = imui.font\r\n        }\r\n        let txt = this.text\r\n\r\n        let textcolor = this.color\r\n        let bgcolor = this.bgcolor\r\n\r\n        if (this.state.mouseOver && !this.state.mouseDown && this.highlight) {\r\n            textcolor = this.highlight\r\n        }\r\n\r\n        if (bgcolor) {\r\n            if (this.state.mouseDown) {\r\n                textcolor = this.bgcolor\r\n                bgcolor = this.color\r\n            }\r\n\r\n            imui.DrawRect(rect, bgcolor)\r\n        }\r\n\r\n        if (this.id === imui.active) {\r\n            textcolor = this.highlight ? this.highlight : textcolor\r\n            if (Date.now() % 1000 > 500) {\r\n                imui.DrawTextFont(this.font, rect.x + this.GetMaxTextWidth(this.font, `${txt}`), rect.y + rect.h / 2 - this.font.cheight / 2, '_', textcolor)\r\n            }\r\n        }\r\n        imui.DrawTextFont(this.font, rect.x, rect.y + rect.h / 2 - this.font.cheight / 2, txt, textcolor)\r\n    }\r\n}\r\n\r\nexport default TextBoxFlat","import Element from './Element.js'\r\n\r\nclass List extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        this.bgScrollbar = params.bgScrollbar ? params.bgScrollbar : '#645355ff'\r\n        this.list = params.list ? params.list : []\r\n        this.currentItem = null\r\n        this.scrollOffset = params.scrollOffset ? params.scrollOffset : 0\r\n        this.topDown = params.topDown ? params.topDown : true\r\n        this.horizontal = params.horizontal ? params.horizontal : false\r\n        this.scrollbar = params.scrollbar ? params.scrollbar : true\r\n\r\n        this.scrollbarCharacters = {\r\n            scrollUp: params.scrollUp ? params.scrollUp : 252,\r\n            scrollDown: params.scrollDown ? params.scrollDown : 253,\r\n            scrollCaret: params.scrollCaret ? params.scrollCaret : 254\r\n        }\r\n\r\n        this.draggingCaret = false\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        let textcolor = this.color\r\n        let bgcolor = this.bgcolor\r\n\r\n        if (this.state.mouseOver && !this.state.mouseDown && this.highlight) {\r\n            textcolor = this.highlight\r\n        }\r\n\r\n        if (bgcolor) {\r\n            imui.DrawRect(rect, bgcolor)\r\n        }\r\n\r\n        let dx = rect.x + imui.font.cwidth\r\n        let dy = rect.y\r\n        for (let l = this.scrollOffset; l < this.list.length; l++) {\r\n            let txt = this.list[l]\r\n\r\n            let txtRect = { x: dx, y: dy, w: txt.length * imui.font.cwidth, h: imui.font.cheight }\r\n            let isHoverItem = this.state.mouseOver &&\r\n                imui.mousePos.y >= txtRect.y && imui.mousePos.x >= txtRect.x &&\r\n                imui.mousePos.x < txtRect.x + txtRect.w && imui.mousePos.y < txtRect.y + txtRect.h\r\n            let isMouseDownItem = this.state.mouseDown && imui.mousePos.y >= txtRect.y && imui.mousePos.x >= txtRect.x &&\r\n                    imui.mousePos.x < txtRect.x + txtRect.w && imui.mousePos.y < txtRect.y + txtRect.h\r\n            if (isMouseDownItem) {\r\n                this.currentItem = l\r\n            }\r\n\r\n            imui.DrawText(dx, dy, txt, isHoverItem ? textcolor : this.color, isHoverItem || this.currentItem === l ? { background: { colour: isMouseDownItem ? '#ccccccff' : this.bgScrollbar }} : undefined)\r\n            if (!this.horizontal) {\r\n                dy += imui.font.cheight\r\n            } else {\r\n                dx += imui.font.cwidth * (txt.length + 1)\r\n            }\r\n            if (dx > rect.x + rect.w) {\r\n                break\r\n            }\r\n            if (dy + imui.font.cheight > rect.y + rect.h) {\r\n                break\r\n            }\r\n        }\r\n        \r\n        if (this.rect.h < imui.font.cheight * this.list.length && !this.horizontal) {\r\n            let upRect = { x: rect.x + rect.w - imui.font.cwidth, y: rect.y, w: imui.font.cwidth, h: imui.font.cheight}\r\n            let downRect = { x: rect.x + rect.w - imui.font.cwidth, y: rect.y + rect.h - imui.font.cheight, w: imui.font.cwidth, h: imui.font.cheight}\r\n            let scrollBarRect = { x: rect.x + rect.w - imui.font.cwidth, y: rect.y + imui.font.cheight, w: imui.font.cwidth, h: rect.h - (imui.font.cheight * 2) }\r\n            imui.DrawRect(scrollBarRect, this.bgScrollbar)\r\n            imui.DrawText(upRect.x, upRect.y, this.scrollbarCharacters.scrollUp, this.InsideRect(imui.mousePos.x, imui.mousePos.y, upRect) && this.state.mouseDown ? this.highlight : this.color, \r\n                this.InsideRect(imui.mousePos.x, imui.mousePos.y, upRect) && this.state.mouseDown ? { background: { colour: this.color } } : { background: { colour: this.bgScrollbar } })\r\n            imui.DrawText(downRect.x, downRect.y, this.scrollbarCharacters.scrollDown, this.InsideRect(imui.mousePos.x, imui.mousePos.y, downRect) && this.state.mouseDown ? this.highlight : this.color, \r\n                this.InsideRect(imui.mousePos.x, imui.mousePos.y, downRect) && this.state.mouseDown ? { background: { colour: this.color } } : { background: { colour: this.bgScrollbar } })\r\n\r\n            let caretPos = (this.scrollOffset / (this.list.length - 1)) * scrollBarRect.h\r\n            let caretColr = this.color\r\n            let caretBg = this.bgScrollbar\r\n\r\n            if (!this.draggingCaret) {\r\n                if (this.InsideRect(imui.mousePos.x, imui.mousePos.y, upRect) && this.Clicked()) {\r\n                    if (this.scrollOffset !== null) {\r\n                        this.scrollOffset = this.scrollOffset - 1 < 0 ? 0: this.scrollOffset - 1\r\n                    }\r\n                } else if (this.InsideRect(imui.mousePos.x, imui.mousePos.y, downRect) && this.Clicked()) {\r\n                    if (this.scrollOffset !== null) {\r\n                        this.scrollOffset = this.scrollOffset + 1 > this.list.length - 1 ? this.list.length - 1: this.scrollOffset + 1\r\n                    }\r\n                } else if (this.InsideRect(imui.mousePos.x, imui.mousePos.y, { x: scrollBarRect.x, y: scrollBarRect.y + caretPos, w: scrollBarRect.w, h: imui.font.cwidth}) && this.state.mouseDown) {\r\n                    this.draggingCaret = true\r\n                } else if (this.InsideRect(imui.mousePos.x, imui.mousePos.y, scrollBarRect) && this.Clicked()) {\r\n                    if (this.scrollOffset !== null) {\r\n                        if (imui.mousePos.y < scrollBarRect.y + caretPos) {\r\n                            this.scrollOffset = this.scrollOffset - 10 > 0 ? this.scrollOffset - 10 : 0\r\n                        } else if (imui.mousePos.y > scrollBarRect.y + caretPos + imui.font.cheight) {\r\n                            this.scrollOffset = this.scrollOffset + 10 < this.list.length - 1 ? this.scrollOffset + 10 : this.list.length - 1\r\n                        }\r\n                    }\r\n                }\r\n            } else if (this.draggingCaret && this.state.mouseDown) {\r\n                this.scrollOffset = parseInt(((imui.mousePos.y - scrollBarRect.y) / scrollBarRect.h) * (this.list.length - 2))\r\n                if (this.scrollOffset < 0) {\r\n                    this.scrollOffset = 0\r\n                } else if (this.scrollOffset > this.list.length - 1) {\r\n                    this.scrollOffset = this.list.length - 1\r\n                }\r\n                caretBg = this.color\r\n                caretColr = this.bgScrollbar\r\n            } else if (this.draggingCaret) {\r\n                this.draggingCaret = false\r\n            }\r\n            let caretHovered = this.InsideRect(imui.mousePos.x, imui.mousePos.y, { x: scrollBarRect.x, y: scrollBarRect.y + caretPos, w: scrollBarRect.w, h: imui.font.cwidth})\r\n            imui.DrawText(scrollBarRect.x, scrollBarRect.y + caretPos, this.scrollbarCharacters.scrollCaret, caretHovered ? this.highlight : caretColr, { background: { colour: caretBg } })\r\n        }\r\n    }\r\n}\r\n\r\nexport default List","import Element from './Element.js'\r\n\r\nclass Image extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        // this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        // this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        this.image = params.image ? params.image : null\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.image) {\r\n            if (this.image.tagName === 'IMG') {\r\n                imui.ctx.drawImage(this.image, this.rect.x, this.rect.y, this.rect.w, this.rect.h)\r\n            } else if (this.image.draw) {\r\n                this.image.draw()\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Image","import Element from './Element.js'\r\n\r\nclass FrameImage extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n\r\n        this.image = params.image ? params.image : null\r\n        if (params.innerRect) {\r\n            this.innerRect = params.innerRect\r\n        } else if (params.borderWidth) {\r\n            this.innerRect = {\r\n                x: params.borderWidth,\r\n                y: params.borderWidth,\r\n                w: this.rect.w - params.borderWidth * 2,\r\n                h: this.rect.h - params.borderWidth * 2\r\n            }\r\n        } else {\r\n            this.innerRect = {\r\n                x: 0, y: 0,\r\n                w: this.rect.w, h: this.rect.h\r\n            }\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.bgcolor) {\r\n            imui.DrawRect(rect, this.bgcolor)\r\n        }\r\n\r\n        if (this.image) {\r\n            // Top Left Corner\r\n            imui.ctx.drawImage(this.image, 0, 0, this.innerRect.x, this.innerRect.y, this.rect.x, this.rect.y, this.innerRect.x, this.innerRect.y)\r\n            // Top Right Corner\r\n            imui.ctx.drawImage(this.image, this.image.width - this.innerRect.x, 0, this.innerRect.x, this.innerRect.y, this.rect.x + this.rect.w - this.innerRect.x, this.rect.y, this.innerRect.x, this.innerRect.y)\r\n            // Bottom Left Corner\r\n            imui.ctx.drawImage(this.image, 0, this.image.height - this.innerRect.y, this.innerRect.x, this.innerRect.y, this.rect.x, this.rect.y + this.rect.h - this.innerRect.y, this.innerRect.x, this.innerRect.y)\r\n            // Bottom Right Corner\r\n            imui.ctx.drawImage(this.image, this.image.width - this.innerRect.x, this.image.height - this.innerRect.y, this.innerRect.x, this.innerRect.y, this.rect.x + this.rect.w - this.innerRect.x, this.rect.y + this.rect.h - this.innerRect.y, this.innerRect.x, this.innerRect.y)\r\n\r\n            // Top Middle Section\r\n            for (let dx = this.rect.x + this.innerRect.x; dx < this.rect.x + this.rect.w - this.innerRect.x; dx += this.image.width - this.innerRect.x * 2) {\r\n                let dw = this.image.width - this.innerRect.x * 2\r\n                if (dx + dw > this.rect.x + this.rect.w - this.innerRect.x) {\r\n                    dw = this.rect.x + this.rect.w - this.innerRect.x - dx\r\n                }\r\n                imui.ctx.drawImage(this.image, this.innerRect.x, 0, dw, this.innerRect.y, dx, this.rect.y, dw, this.innerRect.y)\r\n            }\r\n            // Bottom Middle Section\r\n            for (let dx = this.rect.x + this.innerRect.x; dx < this.rect.x + this.rect.w - this.innerRect.x; dx += this.image.width - this.innerRect.x * 2) {\r\n                let dw = this.image.width - this.innerRect.x * 2\r\n                if (dx + dw > this.rect.x + this.rect.w - this.innerRect.x) {\r\n                    dw = this.rect.x + this.rect.w - this.innerRect.x - dx\r\n                }\r\n                imui.ctx.drawImage(this.image, this.innerRect.x, this.image.height - this.innerRect.y, dw, this.innerRect.y, dx, this.rect.y + this.rect.h - this.innerRect.y, dw, this.innerRect.y)\r\n            }\r\n\r\n            // Left Middle Section\r\n            for (let dy = this.rect.y + this.innerRect.y; dy < this.rect.y + this.rect.h - this.innerRect.y; dy += this.image.height - this.innerRect.y * 2) {\r\n                let dh = this.image.height - this.innerRect.y * 2\r\n                if (dy + dh > this.rect.y + this.rect.h - this.innerRect.y) {\r\n                    dh = this.rect.y + this.rect.h - this.innerRect.y - dy\r\n                }\r\n                imui.ctx.drawImage(this.image, 0, this.innerRect.y, this.innerRect.x, dh, this.rect.x, dy, this.innerRect.x, dh)\r\n            }\r\n            // Right Middle Section\r\n            for (let dy = this.rect.y + this.innerRect.y; dy < this.rect.y + this.rect.h - this.innerRect.y; dy += this.image.height - this.innerRect.y * 2) {\r\n                let dh = this.image.height - this.innerRect.y * 2\r\n                if (dy + dh > this.rect.y + this.rect.h - this.innerRect.y) {\r\n                    dh = this.rect.y + this.rect.h - this.innerRect.y - dy\r\n                }\r\n                imui.ctx.drawImage(this.image, this.image.width - this.innerRect.x, this.innerRect.y, this.innerRect.x, dh, this.rect.x + this.rect.w - this.innerRect.x, dy, this.innerRect.x, dh)\r\n            }\r\n\r\n            // Centre\r\n            let sx = this.innerRect.x\r\n            let sy = this.innerRect.y\r\n            let sw = this.image.width - this.innerRect.x * 2\r\n            let sh = this.image.height - this.innerRect.y * 2\r\n            let dx = this.innerRect.x + this.rect.x\r\n            let dy = this.innerRect.y + this.rect.y\r\n            while (dy < this.rect.y + this.rect.h - this.innerRect.y) {\r\n                let w = sw\r\n                let h = sh\r\n                if (dx + w > this.rect.x + this.rect.w - this.innerRect.x) {\r\n                    w = this.rect.x + this.rect.w - this.innerRect.x - dx\r\n                }\r\n                if (dy + h > this.rect.y + this.rect.h - this.innerRect.y) {\r\n                    h = this.rect.y + this.rect.h - this.innerRect.y - dy\r\n                }\r\n                imui.ctx.drawImage(this.image, sx, sy, w, h, dx, dy, w, h)\r\n                dx += sw\r\n                if (dx > this.rect.x + this.rect.w - this.innerRect.x) {\r\n                    dx = this.innerRect.x + this.rect.x\r\n                    dy += sh\r\n                }\r\n            }\r\n        }\r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        imui.DrawText(rect.x + this.innerRect.x, rect.y + this.innerRect.y, txt, this.color)\r\n    }\r\n}\r\n\r\nexport default FrameImage","import Element from './Element.js'\r\n\r\nclass ButtonImage extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n\r\n        this.image = params.image ? params.image : null\r\n        this.imageDown = params.imageDown ? params.imageDown : null\r\n        this.imageHover = params.imageHover ? params.imageHover : null\r\n        \r\n        this.pressedOffsetY = params.pressedOffsetY ? params.pressedOffsetY : 2\r\n\r\n        if (params.innerRect) {\r\n            this.innerRect = params.innerRect\r\n        } else if (params.borderWidth) {\r\n            this.innerRect = {\r\n                x: params.borderWidth,\r\n                y: params.borderWidth,\r\n                w: this.rect.w - params.borderWidth * 2,\r\n                h: this.rect.h - params.borderWidth * 2\r\n            }\r\n        } else {\r\n            this.innerRect = {\r\n                x: 0, y: 0,\r\n                w: this.rect.w, h: this.rect.h\r\n            }\r\n        }\r\n    }\r\n\r\n    drawImageSlice(imui, image) {\r\n        if (image) {\r\n            // Top Left Corner\r\n            imui.ctx.drawImage(image, 0, 0, this.innerRect.x, this.innerRect.y, this.rect.x, this.rect.y, this.innerRect.x, this.innerRect.y)\r\n            \r\n            // Top Right Corner\r\n            let x2 = image.width - (this.innerRect.x + this.innerRect.w)\r\n            imui.ctx.drawImage(image, image.width - x2, 0, x2, this.innerRect.y, this.rect.x + this.rect.w - x2, this.rect.y, x2, this.innerRect.y)\r\n\r\n            // Bottom Right Corner\r\n            let y2 = image.height - (this.innerRect.y + this.innerRect.h)\r\n            imui.ctx.drawImage(image, image.width - x2, image.height - y2, x2, y2, this.rect.x + this.rect.w - x2, this.rect.y + this.rect.h - y2, x2, y2)\r\n\r\n            // Bottom Left Corner\r\n            imui.ctx.drawImage(image, 0, image.height - y2, this.innerRect.x, y2, this.rect.x, this.rect.y + this.rect.h - y2, this.innerRect.x, y2)\r\n\r\n            // Top Middle Section\r\n            for (let dx = this.rect.x + this.innerRect.x; dx < this.rect.x + this.rect.w - x2; dx += this.innerRect.w) {\r\n                let dw = image.width - x2\r\n                if (dx + dw > this.rect.x + this.rect.w - x2) {\r\n                    dw = this.rect.x + this.rect.w - x2 - dx\r\n                }\r\n                imui.ctx.drawImage(image, this.innerRect.x, 0, dw, this.innerRect.y, dx, this.rect.y, dw, this.innerRect.y)\r\n            }\r\n            // Bottom Middle Section\r\n            for (let dx = this.rect.x + this.innerRect.x; dx < this.rect.x + this.rect.w - x2; dx += this.innerRect.w) {\r\n                let dw = image.width - x2\r\n                if (dx + dw > this.rect.x + this.rect.w - x2) {\r\n                    dw = this.rect.x + this.rect.w - x2 - dx\r\n                }\r\n                imui.ctx.drawImage(image, this.innerRect.x, image.height - y2, dw, y2, dx, this.rect.y + this.rect.h - y2, dw, y2)\r\n            }\r\n\r\n            // Left Middle Section\r\n            for (let dy = this.rect.y + this.innerRect.y; dy < this.rect.y + this.rect.h - y2; dy += this.innerRect.h) {\r\n                let dh = image.height - y2\r\n                if (dy + dh > this.rect.y + this.rect.h - y2) {\r\n                    dh = this.rect.y + this.rect.h - y2 - dy\r\n                }\r\n                imui.ctx.drawImage(image, 0, this.innerRect.y, this.innerRect.x, dh, this.rect.x, dy, this.innerRect.x, dh)\r\n            }\r\n            // Right Middle Section\r\n            for (let dy = this.rect.y + this.innerRect.y; dy < this.rect.y + this.rect.h - y2; dy += this.innerRect.h) {\r\n                let dh = image.height - y2\r\n                if (dy + dh > this.rect.y + this.rect.h - y2) {\r\n                    dh = this.rect.y + this.rect.h - y2 - dy\r\n                }\r\n                imui.ctx.drawImage(image, image.width - x2, this.innerRect.y, x2, dh, this.rect.x + this.rect.w - x2, dy, x2, dh)\r\n            }\r\n\r\n            // Centre\r\n            \r\n            let sx = this.innerRect.x\r\n            let sy = this.innerRect.y\r\n            let sw = this.innerRect.w //image.width - x2\r\n            let sh = this.innerRect.h //image.height - y2\r\n            let dx = this.innerRect.x + this.rect.x\r\n            let dy = this.innerRect.y + this.rect.y\r\n            while (dy < this.rect.y + this.rect.h - y2) {\r\n                let w = sw\r\n                let h = sh\r\n                if (dx + w > this.rect.x + this.rect.w - x2) {\r\n                    w = this.rect.x + this.rect.w - x2 - dx\r\n                }\r\n                if (dy + h > this.rect.y + this.rect.h - y2) {\r\n                    h = this.rect.y + this.rect.h - y2 - dy\r\n                }\r\n                imui.ctx.drawImage(image, sx, sy, w, h, dx, dy, w, h)\r\n                dx += sw\r\n                if (dx > this.rect.x + this.rect.w - x2) {\r\n                    dx = this.innerRect.x + this.rect.x\r\n                    dy += sh\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        let offy = this.state.mouseDown ? this.pressedOffsetY : 0\r\n        let colr = this.Hover() ? this.highlight : this.color\r\n\r\n        if (this.Hover() && !this.state.mouseDown && this.imageHover) {\r\n            this.drawImageSlice(imui, this.imageHover)\r\n        } else if (this.state.mouseDown && this.imageDown) {\r\n            this.drawImageSlice(imui, this.imageDown)\r\n        } else {\r\n            this.drawImageSlice(imui, this.image)\r\n        }\r\n        \r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n    \r\n\r\n        imui.DrawText(rect.x + (rect.w / 2) - (txt.length * imui.font.cwidth) / 2, rect.y + (rect.h / 2) - (imui.font.cheight / 2) + offy, txt, colr)\r\n    }\r\n}\r\n\r\nexport default ButtonImage","import { GetElementType } from './elements.js'\r\n\r\nclass ImUI {\r\n    constructor(canvas, font) {\r\n        this.canvas = canvas\r\n        this.originalCanvas = canvas\r\n        this.ctx = canvas.getContext('2d')\r\n        this.originalCtx = this.ctx\r\n        bfontjs.LoadDefaultFonts()\r\n        this.font = font ? font : bfontjs.Fonts('default')\r\n\r\n        this.lastRect = null\r\n\r\n        this.mousePos = { x: 0, y: 0 }\r\n        this.mouseButton = 0\r\n        \r\n        this.active = null\r\n        this.elements = []\r\n        this.postUpdateIds = []\r\n          \r\n        this.onUpdate = () => {\r\n            return []\r\n        }\r\n\r\n        this.canvas.addEventListener('mousemove', (e) => {\r\n            if (this.executing) {\r\n                this.mousePos.x = parseInt((e.clientX - canvas.offsetLeft) * (this.canvas.width / parseInt(this.canvas.style.width)))\r\n                this.mousePos.y = parseInt((e.clientY - canvas.offsetTop) * (this.canvas.height / parseInt(this.canvas.style.height)))\r\n            }\r\n        })\r\n\r\n        this.canvas.addEventListener('mousedown', (e) => {\r\n            if (this.executing) {\r\n                this.mouseButton = e.buttons\r\n            }\r\n        })\r\n        \r\n        this.canvas.addEventListener('mouseup', (e) => {\r\n            if (this.executing) {\r\n                this.mouseButton = 0\r\n            }\r\n        })\r\n\r\n        window.addEventListener('keydown', (e) => {\r\n            if (this.executing) {\r\n                if (e.key === 'Tab') {\r\n                e.preventDefault()                \r\n                }\r\n            }\r\n        })\r\n\r\n        window.addEventListener('keyup', (e) => {\r\n            if (this.executing) {\r\n                if (this.active) {\r\n                    let element = this.elements.filter(f => f !== undefined).filter(f => f.id === this.active)\r\n                    if (element.length > 0 && element[0].editable) {\r\n                        if (e.key.length === 1) {\r\n                            element[0].prevText = element[0].text\r\n                            element[0].text += e.key\r\n                        } else if (e.key === 'Backspace') {\r\n                            element[0].prevText = element[0].text\r\n                            element[0].text = element[0].text.substring(0, element[0].text.length - 1)\r\n                        } else if (e.key === 'Enter') {\r\n                            this.active = null\r\n                        }\r\n                    }\r\n                    if (element.length > 0) {\r\n                        if (e.key === 'Tab') {\r\n                            let index = this.elements.findIndex(f => f.id === this.active)\r\n                            if (index + 1 < this.elements.length) {\r\n                                index++\r\n                            } else {\r\n                                index = 0\r\n                            }\r\n                            this.active = this.elements[index].id\r\n                        }\r\n                    }\r\n                } else if (this.elements.length > 0) {\r\n                    if (e.key === 'Tab') {\r\n                        this.active = this.elements[0].id\r\n                    }\r\n                }\r\n            }\r\n            return false\r\n        })\r\n        \r\n        this.Enable()\r\n    }\r\n\r\n    Disable() {\r\n        this.executing = false\r\n    }\r\n\r\n    Enable() {\r\n        this.executing = true\r\n        this.UpdateThread()\r\n    }\r\n\r\n    // Update async thread.\r\n    UpdateThread() {\r\n        try {\r\n            if (this.executing) {\r\n                let preUpdateIds = this.elements.map(el => el.id)\r\n\r\n                this.postUpdateIds = []\r\n\r\n                this.elements = this.elements.filter(f => f !== undefined)\r\n                this.onUpdate(this)\r\n\r\n                for (let id in preUpdateIds) {\r\n                    if (this.postUpdateIds.filter(f => f === preUpdateIds[id]).length === 0) {\r\n                        this.elements[this.elements.findIndex(f => f !== undefined && f.id === preUpdateIds[id])] = undefined\r\n                    }\r\n                }\r\n                this.elements = this.elements.filter(f => f !== undefined)\r\n        \r\n                this.Update()\r\n            \r\n                setTimeout(() => this.UpdateThread(), 16)\r\n            }\r\n        } catch (e) { console.error(e) }\r\n    }\r\n\r\n    ChangeContext(canvas) {\r\n        this.canvas = canvas\r\n        this.ctx = canvas.getContext('2d')\r\n    }\r\n    \r\n    ResetContext() {\r\n        this.canvas = this.originalCanvas\r\n        this.ctx = this.originalCtx\r\n    }\r\n\r\n    RemoveElement(id) {\r\n        let index = this.elements.findIndex(f => f.id === id)\r\n        if (index >= 0) {\r\n            let elements = []\r\n            for (let e in this.elements) {\r\n                let element = this.elements[e]\r\n                if (element.id !== id) {\r\n                    elements.push(element)\r\n                }\r\n            }\r\n            this.elements = elements\r\n        }\r\n    }\r\n\r\n    RemoveElements() {\r\n        this.elements = []\r\n    }\r\n\r\n    ElementToTop(id) {\r\n        let index = this.elements.findIndex(f => f.id === id)\r\n        if (index >= 0) {\r\n            let elements = []\r\n            if (index - 1 >= 0) {\r\n                elements = this.elements.slice(0, index)\r\n            }\r\n            if (index + 1 <= this.elements.length - 1) {\r\n                elements.push(...this.elements.slice(index + 1))\r\n            }\r\n            elements.push(this.elements[index])\r\n            this.elements = elements\r\n        }\r\n    }\r\n\r\n    GetMaxTextWidth(txt) {\r\n        let font = this.font\r\n        let lines = []\r\n        try {\r\n            if (typeof txt === 'number') {\r\n                txt = font.codepage.filter(f => f.codenumber === txt)[0].symbol\r\n            }\r\n            lines = txt.split('\\n')\r\n        } catch (e) {\r\n            console.log('Error splitting txt parameters: ', e, ' typeof txt =', typeof txt)\r\n        }\r\n        let w = 0\r\n        for (let l in lines) {\r\n            let line = lines[l]\r\n            if (line.length * font.cwidth > w) {\r\n                w = line.length * font.cwidth\r\n            }\r\n        }\r\n        return w\r\n    }\r\n\r\n    Element(params) {\r\n        params.type = params.type ? params.type : 'element'\r\n        let elem = this.elements.filter(f => f.id === params.id)\r\n        if (elem.length === 0) {\r\n            let ElementClass = GetElementType(params.type)\r\n            let el = new ElementClass(params)\r\n            el.Update(this, false)\r\n            this.elements.push(el)\r\n            this.postUpdateIds.push(params.id)\r\n            this.lastRect = el.rect\r\n            return el\r\n        } else {\r\n            this.postUpdateIds.push(params.id)\r\n            for (let p in params) {\r\n                elem[0][p] = params[p]\r\n            }\r\n            this.lastRect = elem[0].rect\r\n            return elem[0]\r\n        }\r\n    }\r\n\r\n    Layout(params) {\r\n        params.layout = params.layout ? params.layout : 'row'\r\n        if (this.lastRect) {\r\n            if (params.layout.includes('row')) {\r\n                if (params.rect) {\r\n                    params.rect.x += this.lastRect.x\r\n                    params.rect.y += this.lastRect.y + this.lastRect.h\r\n                } else {\r\n                    params.x += this.lastRect.x\r\n                    params.y += this.lastRect.y + this.lastRect.h\r\n                }\r\n            } else if (params.layout.includes('column')) {\r\n                if (params.rect) {\r\n                    params.rect.x += this.lastRect.x + this.lastRect.w\r\n                    params.rect.y += this.lastRect.y\r\n                } else {\r\n                    params.x += this.lastRect.x + this.lastRect.w\r\n                    params.y += this.lastRect.y\r\n                }\r\n            }\r\n        }\r\n        return this.Element(params)\r\n    }\r\n    \r\n    DrawTextFont(font, x, y, text, color, effects) {\r\n        if (text === undefined || text === \"\") {\r\n            return\r\n        }\r\n        return bfontjs.DrawText(this.ctx, parseInt(x), parseInt(y), text, color, font, effects)\r\n    }\r\n\r\n    DrawText(x, y, text, color, effects) {\r\n        return this.DrawTextFont(this.font, x, y, text, color, effects)\r\n    }\r\n    \r\n    DrawRect(rect, color) {\r\n        this.ctx.fillStyle = color\r\n        this.ctx.fillRect(rect.x, rect.y, rect.w, rect.h)\r\n    }\r\n    \r\n    StrokeRect(rect, color) {\r\n        this.ctx.lineWidth = 1\r\n        this.ctx.strokeStyle = color\r\n        this.ctx.strokeRect(parseInt(rect.x) + 0.5, parseInt(rect.y) + 0.5, parseInt(rect.w), parseInt(rect.h))\r\n    }\r\n    StrokeLine(x, y, x2, y2, color) {\r\n        this.ctx.lineWidth = 1\r\n        this.ctx.strokeStyle = color\r\n\r\n        this.ctx.beginPath()\r\n        this.ctx.moveTo(parseInt(x) + 0.5, parseInt(y) + 0.5)\r\n        this.ctx.lineTo(parseInt(x2) + 0.5, parseInt(y2) + 0.5)\r\n        this.ctx.stroke()\r\n    }\r\n\r\n    Update() {\r\n        let eventHandled = false\r\n        for (let e = this.elements.length - 1; e >= 0; e--) {\r\n            if (!eventHandled && this.elements[e]) {\r\n                eventHandled = this.elements[e].Update(this, eventHandled)\r\n            }\r\n        }\r\n    }\r\n\r\n    Draw() {\r\n        for (let e in this.elements) {\r\n            if (this.elements[e]) {\r\n                this.elements[e].Draw(this)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport { ImUI }","import Element from './elements/Element.js'\r\nimport FrameFlat from './elements/FrameFlat.js'\r\nimport Frame3d from './elements/Frame3d.js'\r\nimport Button3d from './elements/Button3d.js'\r\nimport ButtonFlat from './elements/ButtonFlat.js'\r\nimport TextBoxFlat from './elements/TextBoxFlat.js'\r\nimport List from './elements/List.js'\r\nimport Image from './elements/Image.js'\r\nimport FrameImage from './elements/FrameImage.js'\r\nimport ButtonImage from './elements/ButtonImage.js'\r\n\r\nfunction GetElementType(type) {\r\n    switch(type.toLowerCase()) {\r\n        case 'element':\r\n            return Element\r\n        case 'frameflat':\r\n            return FrameFlat\r\n        case 'frame3d':\r\n            return Frame3d\r\n        case 'button3d':\r\n            return Button3d\r\n        case 'buttonflat':\r\n            return ButtonFlat\r\n        case 'textboxflat':\r\n            return TextBoxFlat\r\n        case 'list':\r\n            return List\r\n        case 'image':\r\n            return Image\r\n        case 'frameimage':\r\n            return FrameImage\r\n        case 'buttonimage':\r\n            return ButtonImage\r\n    }\r\n}\r\n\r\nexport { Element, FrameFlat, Frame3d, Button3d, ButtonFlat, TextBoxFlat, List, Image, FrameImage, ButtonImage, GetElementType }"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__517__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","constructor","params","id","Error","this","autosize","rect","x","y","w","h","color","bgcolor","text","prevText","parentRect","wrap","font","imui","state","clicked","mouseOver","mouseDown","mouseUp","change","prevState","buffer","drawBuffer","InitializeBuffer","margin","mx","my","document","createElement","width","height","bufferCtx","getContext","createCanvas","DidChangeState","BuildPreviousState","InsideRect","Clicked","Hover","MouseDown","MouseUp","setState","p","Update","eventHandled","evt","cfont","length","cwidth","cheight","split","active","changed","mousePos","mouseButton","GetMaxTextWidth","txt","lines","codepage","filter","f","codenumber","symbol","e","console","log","l","line","lineLen","c","char","GetWrappedText","wrapPos","parseInt","join","newLines","push","slice","trim","GetWordWrappedText","index","substring","reverse","search","DoTextWrap","bfontjs","Fonts","default","rectCharWidth","Math","floor","wid","hgt","ret","DrawText","textcolor","highlight","DrawTextFont","_Draw","DrawRect","Draw","ctx","save","beginPath","closePath","clip","restore","super","substr","borderRect","StrokeRect","inverted","shadow","StrokeLine","leftChar","rightChar","defaultText","editable","Text","Date","now","bgScrollbar","list","currentItem","scrollOffset","topDown","horizontal","scrollbar","scrollbarCharacters","scrollUp","scrollDown","scrollCaret","draggingCaret","dx","dy","txtRect","isHoverItem","isMouseDownItem","background","colour","upRect","downRect","scrollBarRect","caretPos","caretColr","caretBg","caretHovered","image","tagName","drawImage","draw","innerRect","borderWidth","dw","dh","sx","sy","sw","sh","imageDown","imageHover","pressedOffsetY","drawImageSlice","x2","y2","offy","colr","ImUI","canvas","originalCanvas","originalCtx","LoadDefaultFonts","lastRect","elements","postUpdateIds","onUpdate","addEventListener","executing","clientX","offsetLeft","style","clientY","offsetTop","buttons","window","preventDefault","element","findIndex","Enable","Disable","UpdateThread","preUpdateIds","map","el","setTimeout","error","ChangeContext","ResetContext","RemoveElement","RemoveElements","ElementToTop","Element","type","elem","toLowerCase","GetElementType","Layout","layout","includes","effects","fillStyle","fillRect","lineWidth","strokeStyle","strokeRect","moveTo","lineTo","stroke"],"sourceRoot":""}